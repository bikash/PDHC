2015-10-27 07:26:43,256 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11221
2015-10-27 07:26:43,287 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testGracefulFailoverFailBecomingStandbyAndFailFence
2015-10-27 07:26:43,342 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:43,713 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT
2015-10-27 07:26:43,713 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:host.name=bikash.netgear.com
2015-10-27 07:26:43,714 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.version=1.7.0_75
2015-10-27 07:26:43,715 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.vendor=Oracle Corporation
2015-10-27 07:26:43,715 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home/jre
2015-10-27 07:26:43,716 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.class.path=/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-common/target/test-classes:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-common/target/classes:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-annotations/target/hadoop-annotations-2.6.0.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home/jre/../lib/tools.jar:/Users/bikash/.m2/repository/com/google/guava/guava/11.0.2/guava-11.0.2.jar:/Users/bikash/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar:/Users/bikash/.m2/repository/org/apache/commons/commons-math3/3.1.1/commons-math3-3.1.1.jar:/Users/bikash/.m2/repository/xmlenc/xmlenc/0.52/xmlenc-0.52.jar:/Users/bikash/.m2/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar:/Users/bikash/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar:/Users/bikash/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar:/Users/bikash/.m2/repository/commons-net/commons-net/3.1/commons-net-3.1.jar:/Users/bikash/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/Users/bikash/.m2/repository/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar:/Users/bikash/.m2/repository/org/mortbay/jetty/jetty/6.1.26/jetty-6.1.26.jar:/Users/bikash/.m2/repository/org/mortbay/jetty/jetty-util/6.1.26/jetty-util-6.1.26.jar:/Users/bikash/.m2/repository/com/sun/jersey/jersey-core/1.9/jersey-core-1.9.jar:/Users/bikash/.m2/repository/com/sun/jersey/jersey-json/1.9/jersey-json-1.9.jar:/Users/bikash/.m2/repository/org/codehaus/jettison/jettison/1.1/jettison-1.1.jar:/Users/bikash/.m2/repository/com/sun/xml/bind/jaxb-impl/2.2.3-1/jaxb-impl-2.2.3-1.jar:/Users/bikash/.m2/repository/javax/xml/bind/jaxb-api/2.2.2/jaxb-api-2.2.2.jar:/Users/bikash/.m2/repository/javax/xml/stream/stax-api/1.0-2/stax-api-1.0-2.jar:/Users/bikash/.m2/repository/javax/activation/activation/1.1/activation-1.1.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-jaxrs/1.9.13/jackson-jaxrs-1.9.13.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-xc/1.9.13/jackson-xc-1.9.13.jar:/Users/bikash/.m2/repository/com/sun/jersey/jersey-server/1.9/jersey-server-1.9.jar:/Users/bikash/.m2/repository/asm/asm/3.2/asm-3.2.jar:/Users/bikash/.m2/repository/tomcat/jasper-compiler/5.5.23/jasper-compiler-5.5.23.jar:/Users/bikash/.m2/repository/tomcat/jasper-runtime/5.5.23/jasper-runtime-5.5.23.jar:/Users/bikash/.m2/repository/javax/servlet/jsp/jsp-api/2.1/jsp-api-2.1.jar:/Users/bikash/.m2/repository/commons-el/commons-el/1.0/commons-el-1.0.jar:/Users/bikash/.m2/repository/commons-logging/commons-logging/1.1.3/commons-logging-1.1.3.jar:/Users/bikash/.m2/repository/log4j/log4j/1.2.17/log4j-1.2.17.jar:/Users/bikash/.m2/repository/net/java/dev/jets3t/jets3t/0.9.0/jets3t-0.9.0.jar:/Users/bikash/.m2/repository/org/apache/httpcomponents/httpclient/4.2.5/httpclient-4.2.5.jar:/Users/bikash/.m2/repository/org/apache/httpcomponents/httpcore/4.2.5/httpcore-4.2.5.jar:/Users/bikash/.m2/repository/com/jamesmurty/utils/java-xmlbuilder/0.4/java-xmlbuilder-0.4.jar:/Users/bikash/.m2/repository/junit/junit/4.11/junit-4.11.jar:/Users/bikash/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/bikash/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/Users/bikash/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar:/Users/bikash/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/Users/bikash/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar:/Users/bikash/.m2/repository/commons-beanutils/commons-beanutils-core/1.8.0/commons-beanutils-core-1.8.0.jar:/Users/bikash/.m2/repository/org/slf4j/slf4j-api/1.7.5/slf4j-api-1.7.5.jar:/Users/bikash/.m2/repository/org/slf4j/slf4j-log4j12/1.7.5/slf4j-log4j12-1.7.5.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.13/jackson-core-asl-1.9.13.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.13/jackson-mapper-asl-1.9.13.jar:/Users/bikash/.m2/repository/org/mockito/mockito-all/1.8.5/mockito-all-1.8.5.jar:/Users/bikash/.m2/repository/org/apache/avro/avro/1.7.4/avro-1.7.4.jar:/Users/bikash/.m2/repository/com/thoughtworks/paranamer/paranamer/2.3/paranamer-2.3.jar:/Users/bikash/.m2/repository/org/xerial/snappy/snappy-java/1.0.4.1/snappy-java-1.0.4.1.jar:/Users/bikash/.m2/repository/org/apache/ant/ant/1.8.1/ant-1.8.1.jar:/Users/bikash/.m2/repository/org/apache/ant/ant-launcher/1.8.1/ant-launcher-1.8.1.jar:/Users/bikash/.m2/repository/com/google/protobuf/protobuf-java/2.5.0/protobuf-java-2.5.0.jar:/Users/bikash/.m2/repository/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-auth/target/hadoop-auth-2.6.0.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-kerberos-codec/2.0.0-M15/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-i18n/2.0.0-M15/apacheds-i18n-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-asn1-api/1.0.0-M20/api-asn1-api-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-util/1.0.0-M20/api-util-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-framework/2.6.0/curator-framework-2.6.0.jar:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-auth/target/hadoop-auth-2.6.0-tests.jar:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-minikdc/target/hadoop-minikdc-2.6.0.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-api/2.0.0-M15/apacheds-core-api-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-constants/2.0.0-M15/apacheds-core-constants-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-i18n/1.0.0-M20/api-i18n-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-client-api/1.0.0-M20/api-ldap-client-api-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-codec-core/1.0.0-M20/api-ldap-codec-core-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-aci/1.0.0-M20/api-ldap-extras-aci-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-util/1.0.0-M20/api-ldap-extras-util-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-model/1.0.0-M20/api-ldap-model-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/mina/mina-core/2.0.0-M5/mina-core-2.0.0-M5.jar:/Users/bikash/.m2/repository/net/sf/ehcache/ehcache-core/2.4.4/ehcache-core-2.4.4.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptor-kerberos/2.0.0-M15/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core/2.0.0-M15/apacheds-core-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-admin/2.0.0-M15/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-authn/2.0.0-M15/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-authz/2.0.0-M15/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-changelog/2.0.0-M15/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-collective/2.0.0-M15/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-event/2.0.0-M15/apacheds-interceptors-event-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-exception/2.0.0-M15/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-journal/2.0.0-M15/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-normalization/2.0.0-M15/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-operational/2.0.0-M15/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-referral/2.0.0-M15/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-schema/2.0.0-M15/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-subtree/2.0.0-M15/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-trigger/2.0.0-M15/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-trigger/1.0.0-M20/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-protocol-shared/2.0.0-M15/apacheds-protocol-shared-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-protocol-kerberos/2.0.0-M15/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-shared/2.0.0-M15/apacheds-core-shared-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-ldif-partition/2.0.0-M15/apacheds-ldif-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-xdbm-partition/2.0.0-M15/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-mavibot-partition/2.0.0-M15/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/mavibot/mavibot/1.0.0-M1/mavibot-1.0.0-M1.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-avl/2.0.0-M15/apacheds-core-avl-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-all/1.0.0-M20/api-all-1.0.0-M20.jar:/Users/bikash/.m2/repository/commons-pool/commons-pool/1.6/commons-pool-1.6.jar:/Users/bikash/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-jdbm-partition/2.0.0-M15/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/jdbm/apacheds-jdbm1/2.0.0-M2/apacheds-jdbm1-2.0.0-M2.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-protocol-ldap/2.0.0-M15/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-asn1-ber/1.0.0-M20/api-asn1-ber-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-codec-api/1.0.0-M20/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-codec/1.0.0-M20/api-ldap-extras-codec-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-sp/1.0.0-M20/api-ldap-extras-sp-1.0.0-M20.jar:/Users/bikash/.m2/repository/bouncycastle/bcprov-jdk15/140/bcprov-jdk15-140.jar:/Users/bikash/.m2/repository/com/jcraft/jsch/0.1.42/jsch-0.1.42.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-test/2.6.0/curator-test-2.6.0.jar:/Users/bikash/.m2/repository/org/javassist/javassist/3.18.1-GA/javassist-3.18.1-GA.jar:/Users/bikash/.m2/repository/org/apache/commons/commons-math/2.2/commons-math-2.2.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-client/2.6.0/curator-client-2.6.0.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-recipes/2.6.0/curator-recipes-2.6.0.jar:/Users/bikash/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/Users/bikash/.m2/repository/org/htrace/htrace-core/3.0.4/htrace-core-3.0.4.jar:/Users/bikash/.m2/repository/org/apache/zookeeper/zookeeper/3.4.6/zookeeper-3.4.6.jar:/Users/bikash/.m2/repository/io/netty/netty/3.6.2.Final/netty-3.6.2.Final.jar:/Users/bikash/.m2/repository/org/apache/zookeeper/zookeeper/3.4.6/zookeeper-3.4.6-tests.jar:/Users/bikash/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/Users/bikash/.m2/repository/org/apache/commons/commons-compress/1.4.1/commons-compress-1.4.1.jar:/Users/bikash/.m2/repository/org/tukaani/xz/1.0/xz-1.0.jar:
2015-10-27 07:26:43,718 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.library.path=/Users/bikash/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2015-10-27 07:26:43,720 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.io.tmpdir=/var/folders/j3/bdpymcq1045gxk1mdtp_myvw0000gn/T/
2015-10-27 07:26:43,720 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:java.compiler=<NA>
2015-10-27 07:26:43,721 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:os.name=Mac OS X
2015-10-27 07:26:43,721 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:os.arch=x86_64
2015-10-27 07:26:43,721 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:os.version=10.9.5
2015-10-27 07:26:43,722 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:user.name=bikash
2015-10-27 07:26:43,725 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:user.home=/Users/bikash
2015-10-27 07:26:43,725 INFO  server.ZooKeeperServer (Environment.java:logEnv(100)) - Server environment:user.dir=/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-common
2015-10-27 07:26:43,755 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test8952973581178412211.junit.dir/version-2 snapdir build/test8952973581178412211.junit.dir/version-2
2015-10-27 07:26:43,781 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11221
2015-10-27 07:26:44,008 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11221
2015-10-27 07:26:44,017 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54376
2015-10-27 07:26:44,025 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54376
2015-10-27 07:26:44,029 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:44,030 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54376 (no session established for client)
2015-10-27 07:26:44,037 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:44,949 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testGracefulFailoverFailBecomingStandbyAndFailFence
2015-10-27 07:26:45,335 WARN  util.NativeCodeLoader (NativeCodeLoader.java:<clinit>(62)) - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2015-10-27 07:26:45,410 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT
2015-10-27 07:26:45,411 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:host.name=bikash.netgear.com
2015-10-27 07:26:45,411 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.version=1.7.0_75
2015-10-27 07:26:45,411 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.vendor=Oracle Corporation
2015-10-27 07:26:45,411 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home/jre
2015-10-27 07:26:45,412 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.class.path=/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-common/target/test-classes:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-common/target/classes:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-annotations/target/hadoop-annotations-2.6.0.jar:/Library/Java/JavaVirtualMachines/jdk1.7.0_75.jdk/Contents/Home/jre/../lib/tools.jar:/Users/bikash/.m2/repository/com/google/guava/guava/11.0.2/guava-11.0.2.jar:/Users/bikash/.m2/repository/commons-cli/commons-cli/1.2/commons-cli-1.2.jar:/Users/bikash/.m2/repository/org/apache/commons/commons-math3/3.1.1/commons-math3-3.1.1.jar:/Users/bikash/.m2/repository/xmlenc/xmlenc/0.52/xmlenc-0.52.jar:/Users/bikash/.m2/repository/commons-httpclient/commons-httpclient/3.1/commons-httpclient-3.1.jar:/Users/bikash/.m2/repository/commons-codec/commons-codec/1.4/commons-codec-1.4.jar:/Users/bikash/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar:/Users/bikash/.m2/repository/commons-net/commons-net/3.1/commons-net-3.1.jar:/Users/bikash/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar:/Users/bikash/.m2/repository/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar:/Users/bikash/.m2/repository/org/mortbay/jetty/jetty/6.1.26/jetty-6.1.26.jar:/Users/bikash/.m2/repository/org/mortbay/jetty/jetty-util/6.1.26/jetty-util-6.1.26.jar:/Users/bikash/.m2/repository/com/sun/jersey/jersey-core/1.9/jersey-core-1.9.jar:/Users/bikash/.m2/repository/com/sun/jersey/jersey-json/1.9/jersey-json-1.9.jar:/Users/bikash/.m2/repository/org/codehaus/jettison/jettison/1.1/jettison-1.1.jar:/Users/bikash/.m2/repository/com/sun/xml/bind/jaxb-impl/2.2.3-1/jaxb-impl-2.2.3-1.jar:/Users/bikash/.m2/repository/javax/xml/bind/jaxb-api/2.2.2/jaxb-api-2.2.2.jar:/Users/bikash/.m2/repository/javax/xml/stream/stax-api/1.0-2/stax-api-1.0-2.jar:/Users/bikash/.m2/repository/javax/activation/activation/1.1/activation-1.1.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-jaxrs/1.9.13/jackson-jaxrs-1.9.13.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-xc/1.9.13/jackson-xc-1.9.13.jar:/Users/bikash/.m2/repository/com/sun/jersey/jersey-server/1.9/jersey-server-1.9.jar:/Users/bikash/.m2/repository/asm/asm/3.2/asm-3.2.jar:/Users/bikash/.m2/repository/tomcat/jasper-compiler/5.5.23/jasper-compiler-5.5.23.jar:/Users/bikash/.m2/repository/tomcat/jasper-runtime/5.5.23/jasper-runtime-5.5.23.jar:/Users/bikash/.m2/repository/javax/servlet/jsp/jsp-api/2.1/jsp-api-2.1.jar:/Users/bikash/.m2/repository/commons-el/commons-el/1.0/commons-el-1.0.jar:/Users/bikash/.m2/repository/commons-logging/commons-logging/1.1.3/commons-logging-1.1.3.jar:/Users/bikash/.m2/repository/log4j/log4j/1.2.17/log4j-1.2.17.jar:/Users/bikash/.m2/repository/net/java/dev/jets3t/jets3t/0.9.0/jets3t-0.9.0.jar:/Users/bikash/.m2/repository/org/apache/httpcomponents/httpclient/4.2.5/httpclient-4.2.5.jar:/Users/bikash/.m2/repository/org/apache/httpcomponents/httpcore/4.2.5/httpcore-4.2.5.jar:/Users/bikash/.m2/repository/com/jamesmurty/utils/java-xmlbuilder/0.4/java-xmlbuilder-0.4.jar:/Users/bikash/.m2/repository/junit/junit/4.11/junit-4.11.jar:/Users/bikash/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar:/Users/bikash/.m2/repository/commons-lang/commons-lang/2.6/commons-lang-2.6.jar:/Users/bikash/.m2/repository/commons-configuration/commons-configuration/1.6/commons-configuration-1.6.jar:/Users/bikash/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar:/Users/bikash/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar:/Users/bikash/.m2/repository/commons-beanutils/commons-beanutils-core/1.8.0/commons-beanutils-core-1.8.0.jar:/Users/bikash/.m2/repository/org/slf4j/slf4j-api/1.7.5/slf4j-api-1.7.5.jar:/Users/bikash/.m2/repository/org/slf4j/slf4j-log4j12/1.7.5/slf4j-log4j12-1.7.5.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-core-asl/1.9.13/jackson-core-asl-1.9.13.jar:/Users/bikash/.m2/repository/org/codehaus/jackson/jackson-mapper-asl/1.9.13/jackson-mapper-asl-1.9.13.jar:/Users/bikash/.m2/repository/org/mockito/mockito-all/1.8.5/mockito-all-1.8.5.jar:/Users/bikash/.m2/repository/org/apache/avro/avro/1.7.4/avro-1.7.4.jar:/Users/bikash/.m2/repository/com/thoughtworks/paranamer/paranamer/2.3/paranamer-2.3.jar:/Users/bikash/.m2/repository/org/xerial/snappy/snappy-java/1.0.4.1/snappy-java-1.0.4.1.jar:/Users/bikash/.m2/repository/org/apache/ant/ant/1.8.1/ant-1.8.1.jar:/Users/bikash/.m2/repository/org/apache/ant/ant-launcher/1.8.1/ant-launcher-1.8.1.jar:/Users/bikash/.m2/repository/com/google/protobuf/protobuf-java/2.5.0/protobuf-java-2.5.0.jar:/Users/bikash/.m2/repository/com/google/code/gson/gson/2.2.4/gson-2.2.4.jar:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-auth/target/hadoop-auth-2.6.0.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-kerberos-codec/2.0.0-M15/apacheds-kerberos-codec-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-i18n/2.0.0-M15/apacheds-i18n-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-asn1-api/1.0.0-M20/api-asn1-api-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-util/1.0.0-M20/api-util-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-framework/2.6.0/curator-framework-2.6.0.jar:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-auth/target/hadoop-auth-2.6.0-tests.jar:/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-minikdc/target/hadoop-minikdc-2.6.0.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-api/2.0.0-M15/apacheds-core-api-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-constants/2.0.0-M15/apacheds-core-constants-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-i18n/1.0.0-M20/api-i18n-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-client-api/1.0.0-M20/api-ldap-client-api-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-codec-core/1.0.0-M20/api-ldap-codec-core-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-aci/1.0.0-M20/api-ldap-extras-aci-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-util/1.0.0-M20/api-ldap-extras-util-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-model/1.0.0-M20/api-ldap-model-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/mina/mina-core/2.0.0-M5/mina-core-2.0.0-M5.jar:/Users/bikash/.m2/repository/net/sf/ehcache/ehcache-core/2.4.4/ehcache-core-2.4.4.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptor-kerberos/2.0.0-M15/apacheds-interceptor-kerberos-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core/2.0.0-M15/apacheds-core-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-admin/2.0.0-M15/apacheds-interceptors-admin-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-authn/2.0.0-M15/apacheds-interceptors-authn-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-authz/2.0.0-M15/apacheds-interceptors-authz-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-changelog/2.0.0-M15/apacheds-interceptors-changelog-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-collective/2.0.0-M15/apacheds-interceptors-collective-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-event/2.0.0-M15/apacheds-interceptors-event-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-exception/2.0.0-M15/apacheds-interceptors-exception-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-journal/2.0.0-M15/apacheds-interceptors-journal-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-normalization/2.0.0-M15/apacheds-interceptors-normalization-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-operational/2.0.0-M15/apacheds-interceptors-operational-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-referral/2.0.0-M15/apacheds-interceptors-referral-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-schema/2.0.0-M15/apacheds-interceptors-schema-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-subtree/2.0.0-M15/apacheds-interceptors-subtree-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-interceptors-trigger/2.0.0-M15/apacheds-interceptors-trigger-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-trigger/1.0.0-M20/api-ldap-extras-trigger-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-protocol-shared/2.0.0-M15/apacheds-protocol-shared-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-protocol-kerberos/2.0.0-M15/apacheds-protocol-kerberos-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-shared/2.0.0-M15/apacheds-core-shared-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-ldif-partition/2.0.0-M15/apacheds-ldif-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-xdbm-partition/2.0.0-M15/apacheds-xdbm-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-mavibot-partition/2.0.0-M15/apacheds-mavibot-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/mavibot/mavibot/1.0.0-M1/mavibot-1.0.0-M1.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-core-avl/2.0.0-M15/apacheds-core-avl-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-all/1.0.0-M20/api-all-1.0.0-M20.jar:/Users/bikash/.m2/repository/commons-pool/commons-pool/1.6/commons-pool-1.6.jar:/Users/bikash/.m2/repository/antlr/antlr/2.7.7/antlr-2.7.7.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-jdbm-partition/2.0.0-M15/apacheds-jdbm-partition-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/jdbm/apacheds-jdbm1/2.0.0-M2/apacheds-jdbm1-2.0.0-M2.jar:/Users/bikash/.m2/repository/org/apache/directory/server/apacheds-protocol-ldap/2.0.0-M15/apacheds-protocol-ldap-2.0.0-M15.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-asn1-ber/1.0.0-M20/api-asn1-ber-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-codec-api/1.0.0-M20/api-ldap-extras-codec-api-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-codec/1.0.0-M20/api-ldap-extras-codec-1.0.0-M20.jar:/Users/bikash/.m2/repository/org/apache/directory/api/api-ldap-extras-sp/1.0.0-M20/api-ldap-extras-sp-1.0.0-M20.jar:/Users/bikash/.m2/repository/bouncycastle/bcprov-jdk15/140/bcprov-jdk15-140.jar:/Users/bikash/.m2/repository/com/jcraft/jsch/0.1.42/jsch-0.1.42.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-test/2.6.0/curator-test-2.6.0.jar:/Users/bikash/.m2/repository/org/javassist/javassist/3.18.1-GA/javassist-3.18.1-GA.jar:/Users/bikash/.m2/repository/org/apache/commons/commons-math/2.2/commons-math-2.2.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-client/2.6.0/curator-client-2.6.0.jar:/Users/bikash/.m2/repository/org/apache/curator/curator-recipes/2.6.0/curator-recipes-2.6.0.jar:/Users/bikash/.m2/repository/com/google/code/findbugs/jsr305/1.3.9/jsr305-1.3.9.jar:/Users/bikash/.m2/repository/org/htrace/htrace-core/3.0.4/htrace-core-3.0.4.jar:/Users/bikash/.m2/repository/org/apache/zookeeper/zookeeper/3.4.6/zookeeper-3.4.6.jar:/Users/bikash/.m2/repository/io/netty/netty/3.6.2.Final/netty-3.6.2.Final.jar:/Users/bikash/.m2/repository/org/apache/zookeeper/zookeeper/3.4.6/zookeeper-3.4.6-tests.jar:/Users/bikash/.m2/repository/jline/jline/0.9.94/jline-0.9.94.jar:/Users/bikash/.m2/repository/org/apache/commons/commons-compress/1.4.1/commons-compress-1.4.1.jar:/Users/bikash/.m2/repository/org/tukaani/xz/1.0/xz-1.0.jar:
2015-10-27 07:26:45,412 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.library.path=/Users/bikash/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.
2015-10-27 07:26:45,412 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.io.tmpdir=/var/folders/j3/bdpymcq1045gxk1mdtp_myvw0000gn/T/
2015-10-27 07:26:45,412 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:java.compiler=<NA>
2015-10-27 07:26:45,412 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:os.name=Mac OS X
2015-10-27 07:26:45,413 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:os.arch=x86_64
2015-10-27 07:26:45,413 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:os.version=10.9.5
2015-10-27 07:26:45,413 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:user.name=bikash
2015-10-27 07:26:45,413 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:user.home=/Users/bikash
2015-10-27 07:26:45,413 INFO  zookeeper.ZooKeeper (Environment.java:logEnv(100)) - Client environment:user.dir=/Users/bikash/repos/bigdata/PDHC/lib/hadoop-2.6.0-src/hadoop-common-project/hadoop-common
2015-10-27 07:26:45,415 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@7093b3fc
2015-10-27 07:26:45,437 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:45,438 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54378
2015-10-27 07:26:45,438 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11221, initiating session
2015-10-27 07:26:45,443 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54378
2015-10-27 07:26:45,447 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:45,460 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cdc540000 with negotiated timeout 6000 for client /127.0.0.1:54378
2015-10-27 07:26:45,461 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11221, sessionid = 0x150a90cdc540000, negotiated timeout = 6000
2015-10-27 07:26:45,466 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54378
2015-10-27 07:26:45,466 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1145171034 appData=null cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,466 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1145171034 appData=null cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,467 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:45,468 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54378
2015-10-27 07:26:45,479 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:45,488 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:45,490 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:45,490 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1145171034 appData=null cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,491 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cdc540000
2015-10-27 07:26:45,492 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cdc540000 closed
2015-10-27 07:26:45,492 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:45,492 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:26:45,493 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54378 which had sessionid 0x150a90cdc540000
2015-10-27 07:26:45,493 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@32e8f3eb
2015-10-27 07:26:45,494 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:45,494 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11221, initiating session
2015-10-27 07:26:45,494 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54379
2015-10-27 07:26:45,495 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54379
2015-10-27 07:26:45,496 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cdc540001 with negotiated timeout 6000 for client /127.0.0.1:54379
2015-10-27 07:26:45,496 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11221, sessionid = 0x150a90cdc540001, negotiated timeout = 6000
2015-10-27 07:26:45,496 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2038162121 appData=null cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,497 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2038162121 appData=null cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,497 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:45,497 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54379
2015-10-27 07:26:45,497 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54379
2015-10-27 07:26:45,542 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:45,606 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54380
2015-10-27 07:26:45,660 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:45,661 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54380: starting
2015-10-27 07:26:45,697 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:45,697 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #1 entered state: SERVICE_HEALTHY
2015-10-27 07:26:45,702 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,709 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,709 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:45,713 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:26:45,714 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:45,716 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,716 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #1 active...
2015-10-27 07:26:45,722 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #1 to active state
2015-10-27 07:26:45,724 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,725 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,749 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:26:45,751 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@d016b48
2015-10-27 07:26:45,751 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:45,752 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11221, initiating session
2015-10-27 07:26:45,753 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54381
2015-10-27 07:26:45,753 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54381
2015-10-27 07:26:45,754 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cdc540002 with negotiated timeout 6000 for client /127.0.0.1:54381
2015-10-27 07:26:45,755 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11221, sessionid = 0x150a90cdc540002, negotiated timeout = 6000
2015-10-27 07:26:45,755 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=610939666 appData=null cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,755 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=610939666 appData=null cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,755 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:45,755 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54381
2015-10-27 07:26:45,756 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54381
2015-10-27 07:26:45,757 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:45,758 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54382
2015-10-27 07:26:45,762 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:45,762 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54382: starting
2015-10-27 07:26:45,763 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:45,763 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #2 entered state: SERVICE_HEALTHY
2015-10-27 07:26:45,764 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,766 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90cdc540002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:45,767 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,768 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,768 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #2 should become standby
2015-10-27 07:26:45,769 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #2 to standby state
2015-10-27 07:26:45,770 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,771 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,818 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(650)) - Asking DummyHAService #1 to cede its active state for 10000ms
2015-10-27 07:26:45,825 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:26:45,828 WARN  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(577)) - Unable to transition local node to standby: injected failure
2015-10-27 07:26:45,828 WARN  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(579)) - Quitting election but indicating that fencing is necessary
2015-10-27 07:26:45,828 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:45,829 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,829 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cdc540001
2015-10-27 07:26:45,832 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,833 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54379 which had sessionid 0x150a90cdc540001
2015-10-27 07:26:45,833 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cdc540001 closed
2015-10-27 07:26:45,833 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 9994 more ms
2015-10-27 07:26:45,834 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,835 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:45,836 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000001
2015-10-27 07:26:45,836 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #1
2015-10-27 07:26:45,836 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cdc540001
2015-10-27 07:26:45,836 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:45,837 WARN  ha.FailoverController (FailoverController.java:tryGracefulFence(175)) - Unable to gracefully make DummyHAService #1 standby (injected failure)
2015-10-27 07:26:45,850 INFO  ha.NodeFencer (NodeFencer.java:fence(91)) - ====== Beginning Service Fencing Process... ======
2015-10-27 07:26:45,850 INFO  ha.NodeFencer (NodeFencer.java:fence(94)) - Trying method 1/1: org.apache.hadoop.ha.DummyHAService.DummyFencer(null)
2015-10-27 07:26:45,850 INFO  ha.DummyHAService (DummyHAService.java:tryFence(196)) - tryFence(DummyHAService #1)
2015-10-27 07:26:45,850 INFO  ha.DummyHAService (DummyHAService.java:tryFence(202)) - Injected failure to fence
2015-10-27 07:26:45,851 WARN  ha.NodeFencer (NodeFencer.java:fence(108)) - Fencing method org.apache.hadoop.ha.DummyHAService.DummyFencer(null) was unsuccessful.
2015-10-27 07:26:45,851 ERROR ha.NodeFencer (NodeFencer.java:fence(111)) - Unable to fence service by any configured method.
2015-10-27 07:26:45,853 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(809)) - Exception handling the winning of election
java.lang.RuntimeException: Unable to fence DummyHAService #1
	at org.apache.hadoop.ha.ZKFailoverController.doFence(ZKFailoverController.java:531)
	at org.apache.hadoop.ha.ZKFailoverController.fenceOldActive(ZKFailoverController.java:503)
	at org.apache.hadoop.ha.ZKFailoverController.access$1100(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$ElectorCallbacks.fenceOldActive(ZKFailoverController.java:890)
	at org.apache.hadoop.ha.ActiveStandbyElector.fenceOldActive(ActiveStandbyElector.java:902)
	at org.apache.hadoop.ha.ActiveStandbyElector.becomeActive(ActiveStandbyElector.java:801)
	at org.apache.hadoop.ha.ActiveStandbyElector.processResult(ActiveStandbyElector.java:416)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
2015-10-27 07:26:45,855 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:reJoinElection(670)) - Trying to re-establish ZK session
2015-10-27 07:26:45,855 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,856 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:45,856 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,856 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cdc540002
2015-10-27 07:26:45,856 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@564d82c2
2015-10-27 07:26:45,857 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54381 which had sessionid 0x150a90cdc540002
2015-10-27 07:26:45,858 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cdc540002 closed
2015-10-27 07:26:45,859 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:45,859 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11221, initiating session
2015-10-27 07:26:45,859 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54383
2015-10-27 07:26:45,860 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54383
2015-10-27 07:26:45,861 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cdc540003 with negotiated timeout 6000 for client /127.0.0.1:54383
2015-10-27 07:26:45,861 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11221, sessionid = 0x150a90cdc540003, negotiated timeout = 6000
2015-10-27 07:26:45,862 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,862 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54383
2015-10-27 07:26:45,862 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,862 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:45,862 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54383
2015-10-27 07:26:45,864 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54380
2015-10-27 07:26:45,864 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54382
2015-10-27 07:26:45,865 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,866 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:45,867 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000001
2015-10-27 07:26:45,867 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(900)) - But old node has our own data, so don't need to fence it.
2015-10-27 07:26:45,867 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:45,873 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,873 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #1 active...
2015-10-27 07:26:45,874 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #1 to active state
2015-10-27 07:26:45,874 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,875 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:45,876 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54382
2015-10-27 07:26:45,876 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:45,876 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:45,876 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54380
2015-10-27 07:26:45,877 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:45,877 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cdc540003
2015-10-27 07:26:45,878 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cdc540003 closed
2015-10-27 07:26:45,879 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:45,879 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54383 which had sessionid 0x150a90cdc540003
2015-10-27 07:26:45,879 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cdc540003
2015-10-27 07:26:45,879 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cdc540003
2015-10-27 07:26:45,879 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:45,882 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 17270
2015-10-27 07:26:45,883 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 16
2015-10-27 07:26:45,883 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testGracefulFailoverFailBecomingStandbyAndFailFence
2015-10-27 07:26:45,883 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:45,884 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:45,884 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:45,884 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:45,884 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:45,885 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:45,885 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:45,885 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:45,885 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:45,885 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:45,886 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11221
2015-10-27 07:26:45,889 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testGracefulFailoverFailBecomingStandbyAndFailFence
2015-10-27 07:26:45,889 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testGracefulFailoverFailBecomingStandbyAndFailFence
2015-10-27 07:26:45,892 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11222
2015-10-27 07:26:45,895 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testBecomingActiveFails
2015-10-27 07:26:45,895 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:45,896 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test6219403500686464951.junit.dir/version-2 snapdir build/test6219403500686464951.junit.dir/version-2
2015-10-27 07:26:45,896 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11222
2015-10-27 07:26:45,899 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11222
2015-10-27 07:26:45,899 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54385
2015-10-27 07:26:45,900 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54385
2015-10-27 07:26:45,900 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:45,901 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54385 (no session established for client)
2015-10-27 07:26:45,901 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:45,979 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testBecomingActiveFails
2015-10-27 07:26:45,980 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11222 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@4f957119
2015-10-27 07:26:45,981 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:45,982 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11222, initiating session
2015-10-27 07:26:45,982 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54386
2015-10-27 07:26:45,982 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54386
2015-10-27 07:26:45,983 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:45,996 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ce4890000 with negotiated timeout 6000 for client /127.0.0.1:54386
2015-10-27 07:26:45,997 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11222, sessionid = 0x150a90ce4890000, negotiated timeout = 6000
2015-10-27 07:26:45,997 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2124670813 appData=null cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:45,998 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2124670813 appData=null cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:45,998 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:45,998 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54386
2015-10-27 07:26:45,999 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54386
2015-10-27 07:26:46,000 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:46,001 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:46,003 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:46,003 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2124670813 appData=null cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,004 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ce4890000
2015-10-27 07:26:46,005 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ce4890000 closed
2015-10-27 07:26:46,005 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:46,005 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54386 which had sessionid 0x150a90ce4890000
2015-10-27 07:26:46,005 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:26:46,006 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11222 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5692b5e6
2015-10-27 07:26:46,007 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:46,007 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11222, initiating session
2015-10-27 07:26:46,008 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54387
2015-10-27 07:26:46,008 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54387
2015-10-27 07:26:46,010 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ce4890001 with negotiated timeout 6000 for client /127.0.0.1:54387
2015-10-27 07:26:46,010 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11222, sessionid = 0x150a90ce4890001, negotiated timeout = 6000
2015-10-27 07:26:46,010 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1132006310 appData=null cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,010 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1132006310 appData=null cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,011 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:46,011 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54387
2015-10-27 07:26:46,011 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54387
2015-10-27 07:26:46,012 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:46,013 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54388
2015-10-27 07:26:46,017 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:46,017 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54388: starting
2015-10-27 07:26:46,018 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:46,018 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #3 entered state: SERVICE_HEALTHY
2015-10-27 07:26:46,019 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,023 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,024 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:46,025 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:26:46,025 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:46,027 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,027 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #3 active...
2015-10-27 07:26:46,028 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #3 to active state
2015-10-27 07:26:46,029 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,031 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,057 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:26:46,074 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11222 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@4eedba43
2015-10-27 07:26:46,077 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:46,077 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11222, initiating session
2015-10-27 07:26:46,078 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54389
2015-10-27 07:26:46,078 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54389
2015-10-27 07:26:46,079 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11222, sessionid = 0x150a90ce4890002, negotiated timeout = 6000
2015-10-27 07:26:46,080 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ce4890002 with negotiated timeout 6000 for client /127.0.0.1:54389
2015-10-27 07:26:46,080 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=15670808 appData=null cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,080 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:46,080 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=15670808 appData=null cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,080 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54389
2015-10-27 07:26:46,081 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54389
2015-10-27 07:26:46,082 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:46,083 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54390
2015-10-27 07:26:46,086 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:46,087 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54390: starting
2015-10-27 07:26:46,088 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:46,088 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #4 entered state: SERVICE_HEALTHY
2015-10-27 07:26:46,089 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,091 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90ce4890002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:46,092 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,093 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,093 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #4 should become standby
2015-10-27 07:26:46,094 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #4 to standby state
2015-10-27 07:26:46,094 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,096 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,125 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testBecomingActiveFails(322)) - Making svc1 fail to become active
2015-10-27 07:26:46,125 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testBecomingActiveFails(325)) - Faking svc0 unhealthy, should NOT successfully failover to svc1
2015-10-27 07:26:46,172 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #3: not healthy
2015-10-27 07:26:46,173 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_UNHEALTHY
2015-10-27 07:26:46,173 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #3 entered state: SERVICE_UNHEALTHY
2015-10-27 07:26:46,173 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(766)) - Quitting master election for DummyHAService #3 and marking that fencing is necessary
2015-10-27 07:26:46,173 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:46,173 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,174 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ce4890001
2015-10-27 07:26:46,175 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,176 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ce4890001 closed
2015-10-27 07:26:46,177 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90ce4890001
2015-10-27 07:26:46,177 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:46,178 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90ce4890001, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:26:46,178 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54387 which had sessionid 0x150a90ce4890001
2015-10-27 07:26:46,179 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,179 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:46,180 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000003
2015-10-27 07:26:46,180 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #3
2015-10-27 07:26:46,182 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #3 to standby state without fencing
2015-10-27 07:26:46,182 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:46,184 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,184 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #4 active...
2015-10-27 07:26:46,184 FATAL ha.ZKFailoverController (ZKFailoverController.java:becomeActive(391)) - Couldn't make DummyHAService #4 active
org.apache.hadoop.ha.ServiceFailedException: injected failure
	at org.apache.hadoop.ha.DummyHAService$MockHAProtocolImpl.transitionToActive(DummyHAService.java:146)
	at org.apache.hadoop.ha.HAServiceProtocolHelper.transitionToActive(HAServiceProtocolHelper.java:48)
	at org.apache.hadoop.ha.ZKFailoverController.becomeActive(ZKFailoverController.java:380)
	at org.apache.hadoop.ha.ZKFailoverController.access$900(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$ElectorCallbacks.becomeActive(ZKFailoverController.java:871)
	at org.apache.hadoop.ha.ActiveStandbyElector.becomeActive(ActiveStandbyElector.java:805)
	at org.apache.hadoop.ha.ActiveStandbyElector.processResult(ActiveStandbyElector.java:416)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
2015-10-27 07:26:46,185 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(809)) - Exception handling the winning of election
org.apache.hadoop.ha.ServiceFailedException: injected failure
	at org.apache.hadoop.ha.DummyHAService$MockHAProtocolImpl.transitionToActive(DummyHAService.java:146)
	at org.apache.hadoop.ha.HAServiceProtocolHelper.transitionToActive(HAServiceProtocolHelper.java:48)
	at org.apache.hadoop.ha.ZKFailoverController.becomeActive(ZKFailoverController.java:380)
	at org.apache.hadoop.ha.ZKFailoverController.access$900(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$ElectorCallbacks.becomeActive(ZKFailoverController.java:871)
	at org.apache.hadoop.ha.ActiveStandbyElector.becomeActive(ActiveStandbyElector.java:805)
	at org.apache.hadoop.ha.ActiveStandbyElector.processResult(ActiveStandbyElector.java:416)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
2015-10-27 07:26:46,185 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:reJoinElection(670)) - Trying to re-establish ZK session
2015-10-27 07:26:46,185 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:46,186 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ce4890002
2015-10-27 07:26:46,187 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ce4890002 closed
2015-10-27 07:26:46,187 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54389 which had sessionid 0x150a90ce4890002
2015-10-27 07:26:46,195 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testBecomingActiveFails(338)) - Faking svc0 healthy again, should go back to svc0
2015-10-27 07:26:46,228 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:46,228 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #3 entered state: SERVICE_HEALTHY
2015-10-27 07:26:46,229 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,229 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,229 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11222 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2abb9259
2015-10-27 07:26:46,230 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:46,230 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11222, initiating session
2015-10-27 07:26:46,231 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54391
2015-10-27 07:26:46,231 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54391
2015-10-27 07:26:46,232 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ce4890003 with negotiated timeout 6000 for client /127.0.0.1:54391
2015-10-27 07:26:46,232 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11222, sessionid = 0x150a90ce4890003, negotiated timeout = 6000
2015-10-27 07:26:46,233 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,234 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,234 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:46,234 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54391
2015-10-27 07:26:46,234 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54391
2015-10-27 07:26:46,236 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,236 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:46,237 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000004
2015-10-27 07:26:46,237 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #4
2015-10-27 07:26:46,239 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #4 to standby state without fencing
2015-10-27 07:26:46,239 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:46,241 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,241 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #3 active...
2015-10-27 07:26:46,241 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #3 to active state
2015-10-27 07:26:46,242 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,243 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,247 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testBecomingActiveFails(346)) - Allowing svc1 to become active, expiring svc0
2015-10-27 07:26:46,250 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 0's zookeeper session 94761465013665795
2015-10-27 07:26:46,250 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90ce4890003
2015-10-27 07:26:46,250 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ce4890003
2015-10-27 07:26:46,251 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54391 which had sessionid 0x150a90ce4890003
2015-10-27 07:26:46,252 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,252 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90ce4890003, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:26:46,252 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,354 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -4 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,354 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(440)) - Received create error from Zookeeper. code:CONNECTIONLOSS for path /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:46,354 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(444)) - Retrying createNode createRetryCount: 0
2015-10-27 07:26:46,355 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:46,355 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:26:46,860 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:46,860 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@3988b95
2015-10-27 07:26:46,861 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:46,862 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:47,189 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,189 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11222 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2cadd45e
2015-10-27 07:26:47,190 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:47,190 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11222, initiating session
2015-10-27 07:26:47,190 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54393
2015-10-27 07:26:47,191 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54393
2015-10-27 07:26:47,200 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ce4890004 with negotiated timeout 6000 for client /127.0.0.1:54393
2015-10-27 07:26:47,201 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11222, sessionid = 0x150a90ce4890004, negotiated timeout = 6000
2015-10-27 07:26:47,202 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,202 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:47,202 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,203 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54393
2015-10-27 07:26:47,203 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:47,203 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54393
2015-10-27 07:26:47,205 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,205 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:47,207 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000003
2015-10-27 07:26:47,207 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #3
2015-10-27 07:26:47,209 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #3 to standby state without fencing
2015-10-27 07:26:47,209 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:47,211 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,211 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #4 active...
2015-10-27 07:26:47,212 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #4 to active state
2015-10-27 07:26:47,212 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,213 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,215 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54388
2015-10-27 07:26:47,215 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54390
2015-10-27 07:26:47,219 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:47,219 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54390
2015-10-27 07:26:47,219 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:47,219 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:47,219 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54388
2015-10-27 07:26:47,219 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:47,220 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1132006310 appData=00000003 cb=Elector callbacks for DummyHAService #3
2015-10-27 07:26:47,220 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=15670808 appData=00000004 cb=Elector callbacks for DummyHAService #4
2015-10-27 07:26:47,221 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ce4890004
2015-10-27 07:26:47,222 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ce4890004 closed
2015-10-27 07:26:47,223 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:47,223 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54393 which had sessionid 0x150a90ce4890004
2015-10-27 07:26:47,223 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90ce4890004
2015-10-27 07:26:47,223 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:47,964 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:47,964 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:48,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:48,045 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11222. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:48,046 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11222, initiating session
2015-10-27 07:26:48,046 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54395
2015-10-27 07:26:48,047 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90ce4890003 at /127.0.0.1:54395
2015-10-27 07:26:48,048 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(610)) - Invalid session 0x150a90ce4890003 for client /127.0.0.1:54395, probably expired
2015-10-27 07:26:48,048 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54395 which had sessionid 0x150a90ce4890003
2015-10-27 07:26:48,148 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ce4890003 closed
2015-10-27 07:26:48,149 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:48,149 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90ce4890003
2015-10-27 07:26:48,149 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90ce4890003
2015-10-27 07:26:48,150 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:48,150 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 32747
2015-10-27 07:26:48,150 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 15
2015-10-27 07:26:48,150 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testBecomingActiveFails
2015-10-27 07:26:48,150 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:48,151 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:48,151 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:48,151 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:48,152 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:48,152 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:48,152 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:48,152 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:48,152 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:48,153 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:48,154 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11222
2015-10-27 07:26:48,156 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testBecomingActiveFails
2015-10-27 07:26:48,156 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testBecomingActiveFails
2015-10-27 07:26:48,158 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11223
2015-10-27 07:26:48,159 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testZooKeeperFailure
2015-10-27 07:26:48,159 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:48,160 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test1017193425311681401.junit.dir/version-2 snapdir build/test1017193425311681401.junit.dir/version-2
2015-10-27 07:26:48,160 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11223
2015-10-27 07:26:48,162 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11223
2015-10-27 07:26:48,163 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54397
2015-10-27 07:26:48,164 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54397
2015-10-27 07:26:48,165 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:48,167 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54397 (no session established for client)
2015-10-27 07:26:48,167 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:48,225 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testZooKeeperFailure
2015-10-27 07:26:48,226 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11223 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@748a8ffb
2015-10-27 07:26:48,226 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:48,227 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11223, initiating session
2015-10-27 07:26:48,227 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54398
2015-10-27 07:26:48,227 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54398
2015-10-27 07:26:48,228 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:48,229 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ced610000 with negotiated timeout 6000 for client /127.0.0.1:54398
2015-10-27 07:26:48,230 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11223, sessionid = 0x150a90ced610000, negotiated timeout = 6000
2015-10-27 07:26:48,230 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=384622608 appData=null cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,231 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54398
2015-10-27 07:26:48,231 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54398
2015-10-27 07:26:48,232 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:48,235 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:48,237 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:48,237 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=384622608 appData=null cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,238 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ced610000
2015-10-27 07:26:48,239 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ced610000 closed
2015-10-27 07:26:48,239 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54398 which had sessionid 0x150a90ced610000
2015-10-27 07:26:48,239 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90ced610000
2015-10-27 07:26:48,239 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:48,239 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:26:48,240 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11223 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@3fd7ada9
2015-10-27 07:26:48,241 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:48,241 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11223, initiating session
2015-10-27 07:26:48,241 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54399
2015-10-27 07:26:48,242 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54399
2015-10-27 07:26:48,243 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ced610001 with negotiated timeout 6000 for client /127.0.0.1:54399
2015-10-27 07:26:48,243 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11223, sessionid = 0x150a90ced610001, negotiated timeout = 6000
2015-10-27 07:26:48,244 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1429031424 appData=null cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,244 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1429031424 appData=null cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,244 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:48,245 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54399
2015-10-27 07:26:48,245 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54399
2015-10-27 07:26:48,246 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:48,247 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54400
2015-10-27 07:26:48,262 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:48,263 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54400: starting
2015-10-27 07:26:48,263 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:48,264 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #5 entered state: SERVICE_HEALTHY
2015-10-27 07:26:48,265 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,268 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,268 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:48,269 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:26:48,269 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:48,271 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,271 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #5 active...
2015-10-27 07:26:48,272 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #5 to active state
2015-10-27 07:26:48,273 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,274 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,291 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:26:48,292 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11223 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@6f1081d1
2015-10-27 07:26:48,293 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:48,293 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11223, initiating session
2015-10-27 07:26:48,293 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54401
2015-10-27 07:26:48,294 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54401
2015-10-27 07:26:48,295 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ced610002 with negotiated timeout 6000 for client /127.0.0.1:54401
2015-10-27 07:26:48,295 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11223, sessionid = 0x150a90ced610002, negotiated timeout = 6000
2015-10-27 07:26:48,296 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=309270792 appData=null cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,296 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=309270792 appData=null cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,296 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54401
2015-10-27 07:26:48,296 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:48,297 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54401
2015-10-27 07:26:48,299 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:48,300 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54402
2015-10-27 07:26:48,303 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:48,303 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54402: starting
2015-10-27 07:26:48,305 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:48,306 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #6 entered state: SERVICE_HEALTHY
2015-10-27 07:26:48,306 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,307 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90ced610002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:48,308 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,309 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,309 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #6 should become standby
2015-10-27 07:26:48,310 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #6 to standby state
2015-10-27 07:26:48,311 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,312 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,342 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testZooKeeperFailure(368)) - ====== Stopping ZK server
2015-10-27 07:26:48,342 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:48,343 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54401 which had sessionid 0x150a90ced610002
2015-10-27 07:26:48,343 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90ced610002, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:26:48,344 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54399 which had sessionid 0x150a90ced610001
2015-10-27 07:26:48,344 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90ced610001, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:26:48,345 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:48,345 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:48,345 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:48,346 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:48,346 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:48,346 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:48,346 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:48,347 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:48,347 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11223
2015-10-27 07:26:48,348 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11223
2015-10-27 07:26:48,349 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testZooKeeperFailure(372)) - ====== Waiting for services to enter NEUTRAL mode
2015-10-27 07:26:48,445 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,445 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:26:48,446 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,446 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:26:48,446 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:48,446 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:48,450 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testZooKeeperFailure(378)) - ====== Checking that the services didn't change HA state
2015-10-27 07:26:48,450 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testZooKeeperFailure(382)) - ====== Restarting server
2015-10-27 07:26:48,450 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:48,450 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test1017193425311681401.junit.dir/version-2 snapdir build/test1017193425311681401.junit.dir/version-2
2015-10-27 07:26:48,451 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11223
2015-10-27 07:26:48,469 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11223
2015-10-27 07:26:48,470 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54405
2015-10-27 07:26:48,470 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54405
2015-10-27 07:26:48,471 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:48,472 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54405 (no session established for client)
2015-10-27 07:26:48,473 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11223
2015-10-27 07:26:48,473 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54406
2015-10-27 07:26:48,474 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54406
2015-10-27 07:26:48,474 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:48,475 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54406 (no session established for client)
2015-10-27 07:26:49,066 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:49,066 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:49,941 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:49,942 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11223, initiating session
2015-10-27 07:26:49,942 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54408
2015-10-27 07:26:49,944 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90ced610002 at /127.0.0.1:54408
2015-10-27 07:26:49,945 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ced610002 with negotiated timeout 6000 for client /127.0.0.1:54408
2015-10-27 07:26:49,945 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11223, sessionid = 0x150a90ced610002, negotiated timeout = 6000
2015-10-27 07:26:49,946 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54408
2015-10-27 07:26:49,946 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: DISCONNECTED for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:49,947 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:49,947 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54408
2015-10-27 07:26:49,947 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:49,949 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:49,949 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:49,949 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #6 should become standby
2015-10-27 07:26:49,950 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #6 to standby state
2015-10-27 07:26:50,168 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,169 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:50,222 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11223. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,223 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11223, initiating session
2015-10-27 07:26:50,223 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54410
2015-10-27 07:26:50,224 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90ced610001 at /127.0.0.1:54410
2015-10-27 07:26:50,224 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90ced610001 with negotiated timeout 6000 for client /127.0.0.1:54410
2015-10-27 07:26:50,224 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11223, sessionid = 0x150a90ced610001, negotiated timeout = 6000
2015-10-27 07:26:50,225 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54410
2015-10-27 07:26:50,225 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54410
2015-10-27 07:26:50,225 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: DISCONNECTED for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:50,226 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:50,226 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:50,228 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:50,228 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:50,229 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000005
2015-10-27 07:26:50,229 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(900)) - But old node has our own data, so don't need to fence it.
2015-10-27 07:26:50,229 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:50,230 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.a
2015-10-27 07:26:50,240 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:50,240 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #5 active...
2015-10-27 07:26:50,241 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #5 to active state
2015-10-27 07:26:50,251 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54402
2015-10-27 07:26:50,251 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54400
2015-10-27 07:26:50,254 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:50,254 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:50,255 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:50,255 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=309270792 appData=00000006 cb=Elector callbacks for DummyHAService #6
2015-10-27 07:26:50,254 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54402
2015-10-27 07:26:50,255 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1429031424 appData=00000005 cb=Elector callbacks for DummyHAService #5
2015-10-27 07:26:50,255 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54400
2015-10-27 07:26:50,255 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:50,256 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ced610002
2015-10-27 07:26:50,256 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90ced610001
2015-10-27 07:26:50,257 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54408 which had sessionid 0x150a90ced610002
2015-10-27 07:26:50,258 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ced610002 closed
2015-10-27 07:26:50,258 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:50,258 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,259 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90ced610001 closed
2015-10-27 07:26:50,259 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:50,259 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54410 which had sessionid 0x150a90ced610001
2015-10-27 07:26:50,259 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90ced610001
2015-10-27 07:26:50,260 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,260 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 10022
2015-10-27 07:26:50,260 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 19
2015-10-27 07:26:50,260 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testZooKeeperFailure
2015-10-27 07:26:50,260 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:50,260 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:50,261 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:50,261 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:50,262 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:50,262 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:50,262 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:50,262 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:50,262 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:50,263 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:50,263 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11223
2015-10-27 07:26:50,264 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testZooKeeperFailure
2015-10-27 07:26:50,265 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testZooKeeperFailure
2015-10-27 07:26:50,265 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11224
2015-10-27 07:26:50,266 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testFormatOneClusterLeavesOtherClustersAlone
2015-10-27 07:26:50,267 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:50,267 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test3798925254292034657.junit.dir/version-2 snapdir build/test3798925254292034657.junit.dir/version-2
2015-10-27 07:26:50,267 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11224
2015-10-27 07:26:50,269 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11224
2015-10-27 07:26:50,270 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54412
2015-10-27 07:26:50,271 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54412
2015-10-27 07:26:50,271 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:50,272 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54412 (no session established for client)
2015-10-27 07:26:50,274 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:50,327 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testFormatOneClusterLeavesOtherClustersAlone
2015-10-27 07:26:50,328 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11224 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@20d04cf3
2015-10-27 07:26:50,329 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11224. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,330 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11224, initiating session
2015-10-27 07:26:50,330 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54413
2015-10-27 07:26:50,330 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54413
2015-10-27 07:26:50,330 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:50,332 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf59c0000 with negotiated timeout 6000 for client /127.0.0.1:54413
2015-10-27 07:26:50,332 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11224, sessionid = 0x150a90cf59c0000, negotiated timeout = 6000
2015-10-27 07:26:50,337 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54413
2015-10-27 07:26:50,338 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54413
2015-10-27 07:26:50,338 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf59c0000
2015-10-27 07:26:50,338 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1440055464 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,339 FATAL ha.ZKFailoverController (ZKFailoverController.java:doRun(217)) - Unable to start failover controller. Parent znode does not exist.
Run with -formatZK flag to initialize ZooKeeper.
2015-10-27 07:26:50,339 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1440055464 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,341 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf59c0000
2015-10-27 07:26:50,342 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54413 which had sessionid 0x150a90cf59c0000
2015-10-27 07:26:50,342 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf59c0000 closed
2015-10-27 07:26:50,342 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,348 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11224 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5516e01c
2015-10-27 07:26:50,349 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11224. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,350 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11224, initiating session
2015-10-27 07:26:50,350 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54414
2015-10-27 07:26:50,351 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54414
2015-10-27 07:26:50,352 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf59c0001 with negotiated timeout 6000 for client /127.0.0.1:54414
2015-10-27 07:26:50,352 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11224, sessionid = 0x150a90cf59c0001, negotiated timeout = 6000
2015-10-27 07:26:50,355 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1504671689 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,355 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1504671689 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,356 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:50,355 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54414
2015-10-27 07:26:50,356 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54414
2015-10-27 07:26:50,357 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:50,359 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:50,362 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:50,362 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1504671689 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,363 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf59c0001
2015-10-27 07:26:50,364 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54414 which had sessionid 0x150a90cf59c0001
2015-10-27 07:26:50,364 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,365 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf59c0001 closed
2015-10-27 07:26:50,365 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11224 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@26a18951
2015-10-27 07:26:50,367 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11224. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,367 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11224, initiating session
2015-10-27 07:26:50,367 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54415
2015-10-27 07:26:50,368 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54415
2015-10-27 07:26:50,369 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf59c0002 with negotiated timeout 6000 for client /127.0.0.1:54415
2015-10-27 07:26:50,371 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11224, sessionid = 0x150a90cf59c0002, negotiated timeout = 6000
2015-10-27 07:26:50,371 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf59c0002
2015-10-27 07:26:50,372 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54415
2015-10-27 07:26:50,372 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=142976762 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,372 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54415
2015-10-27 07:26:50,373 FATAL ha.ZKFailoverController (ZKFailoverController.java:doRun(217)) - Unable to start failover controller. Parent znode does not exist.
Run with -formatZK flag to initialize ZooKeeper.
2015-10-27 07:26:50,373 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=142976762 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,374 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf59c0002
2015-10-27 07:26:50,375 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54415 which had sessionid 0x150a90cf59c0002
2015-10-27 07:26:50,375 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,375 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf59c0002 closed
2015-10-27 07:26:50,376 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11224 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@3c1cd99
2015-10-27 07:26:50,377 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11224. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,378 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11224, initiating session
2015-10-27 07:26:50,378 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54416
2015-10-27 07:26:50,378 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54416
2015-10-27 07:26:50,379 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf59c0003 with negotiated timeout 6000 for client /127.0.0.1:54416
2015-10-27 07:26:50,380 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11224, sessionid = 0x150a90cf59c0003, negotiated timeout = 6000
2015-10-27 07:26:50,381 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54416
2015-10-27 07:26:50,381 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf59c0003
2015-10-27 07:26:50,382 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1119602006 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,382 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54416
2015-10-27 07:26:50,383 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:50,384 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90cf59c0003 type:create cxid:0x2 zxid:0xa txntype:-1 reqpath:n/a Error Path:/hadoop-ha Error:KeeperErrorCode = NodeExists for /hadoop-ha
2015-10-27 07:26:50,384 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/other-scope
2015-10-27 07:26:50,387 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/other-scope in ZK.
2015-10-27 07:26:50,387 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1119602006 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,388 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf59c0003
2015-10-27 07:26:50,389 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54416 which had sessionid 0x150a90cf59c0003
2015-10-27 07:26:50,389 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,389 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf59c0003 closed
2015-10-27 07:26:50,390 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11224 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@3c256b49
2015-10-27 07:26:50,391 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11224. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,392 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11224, initiating session
2015-10-27 07:26:50,392 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54417
2015-10-27 07:26:50,393 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54417
2015-10-27 07:26:50,394 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf59c0004 with negotiated timeout 6000 for client /127.0.0.1:54417
2015-10-27 07:26:50,394 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11224, sessionid = 0x150a90cf59c0004, negotiated timeout = 6000
2015-10-27 07:26:50,395 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf59c0004
2015-10-27 07:26:50,395 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54417
2015-10-27 07:26:50,395 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=910294156 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,395 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54417
2015-10-27 07:26:50,396 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=910294156 appData=null cb=Elector callbacks for DummyHAService #8
2015-10-27 07:26:50,397 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf59c0004
2015-10-27 07:26:50,398 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54417 which had sessionid 0x150a90cf59c0004
2015-10-27 07:26:50,398 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,398 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf59c0004 closed
2015-10-27 07:26:50,399 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 17451
2015-10-27 07:26:50,399 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 22
2015-10-27 07:26:50,399 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testFormatOneClusterLeavesOtherClustersAlone
2015-10-27 07:26:50,399 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:50,399 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:50,400 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:50,400 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:50,400 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:50,401 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:50,401 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:50,401 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:50,401 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:50,402 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:50,403 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11224
2015-10-27 07:26:50,404 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testFormatOneClusterLeavesOtherClustersAlone
2015-10-27 07:26:50,404 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testFormatOneClusterLeavesOtherClustersAlone
2015-10-27 07:26:50,405 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11225
2015-10-27 07:26:50,406 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testCedeActive
2015-10-27 07:26:50,406 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:50,407 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test6822597151359621211.junit.dir/version-2 snapdir build/test6822597151359621211.junit.dir/version-2
2015-10-27 07:26:50,407 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11225
2015-10-27 07:26:50,409 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11225
2015-10-27 07:26:50,410 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54419
2015-10-27 07:26:50,411 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54419
2015-10-27 07:26:50,411 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:50,412 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54419 (no session established for client)
2015-10-27 07:26:50,412 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:50,450 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testCedeActive
2015-10-27 07:26:50,451 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11225 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2db8b352
2015-10-27 07:26:50,452 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,452 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11225, initiating session
2015-10-27 07:26:50,452 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54420
2015-10-27 07:26:50,453 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54420
2015-10-27 07:26:50,453 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:50,455 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf6280000 with negotiated timeout 6000 for client /127.0.0.1:54420
2015-10-27 07:26:50,455 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11225, sessionid = 0x150a90cf6280000, negotiated timeout = 6000
2015-10-27 07:26:50,456 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2092429205 appData=null cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,456 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54420
2015-10-27 07:26:50,456 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54420
2015-10-27 07:26:50,457 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:50,460 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:50,462 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:50,462 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2092429205 appData=null cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,462 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf6280000
2015-10-27 07:26:50,463 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf6280000 closed
2015-10-27 07:26:50,463 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54420 which had sessionid 0x150a90cf6280000
2015-10-27 07:26:50,464 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:26:50,464 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf6280000
2015-10-27 07:26:50,464 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,464 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11225 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@1618346a
2015-10-27 07:26:50,465 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,466 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11225, initiating session
2015-10-27 07:26:50,466 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54421
2015-10-27 07:26:50,466 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54421
2015-10-27 07:26:50,468 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf6280001 with negotiated timeout 6000 for client /127.0.0.1:54421
2015-10-27 07:26:50,468 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11225, sessionid = 0x150a90cf6280001, negotiated timeout = 6000
2015-10-27 07:26:50,469 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1159998485 appData=null cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,469 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54421
2015-10-27 07:26:50,469 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1159998485 appData=null cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,469 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:50,469 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54421
2015-10-27 07:26:50,471 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:50,472 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54422
2015-10-27 07:26:50,477 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:50,477 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54422: starting
2015-10-27 07:26:50,478 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:50,478 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #9 entered state: SERVICE_HEALTHY
2015-10-27 07:26:50,479 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,481 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:50,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:26:50,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:50,484 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,484 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #9 active...
2015-10-27 07:26:50,485 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #9 to active state
2015-10-27 07:26:50,486 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,487 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,515 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:26:50,516 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11225 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@35080a9e
2015-10-27 07:26:50,517 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:50,517 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11225, initiating session
2015-10-27 07:26:50,517 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54423
2015-10-27 07:26:50,518 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54423
2015-10-27 07:26:50,519 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf6280002 with negotiated timeout 6000 for client /127.0.0.1:54423
2015-10-27 07:26:50,519 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11225, sessionid = 0x150a90cf6280002, negotiated timeout = 6000
2015-10-27 07:26:50,520 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=73340795 appData=null cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,592 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54423
2015-10-27 07:26:50,592 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54423
2015-10-27 07:26:50,594 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=73340795 appData=null cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,594 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:50,594 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:50,595 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54424
2015-10-27 07:26:50,599 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:50,599 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54424: starting
2015-10-27 07:26:50,600 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:50,601 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #10 entered state: SERVICE_HEALTHY
2015-10-27 07:26:50,601 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,602 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90cf6280002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:50,603 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,604 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,604 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #10 should become standby
2015-10-27 07:26:50,605 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #10 to standby state
2015-10-27 07:26:50,605 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,607 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,643 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:26:50,644 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(575)) - Successfully ensured local node is in standby mode
2015-10-27 07:26:50,645 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:50,645 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:tryDeleteOwnBreadCrumbNode(844)) - Deleting bread-crumb of active node...
2015-10-27 07:26:50,649 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:50,650 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf6280001
2015-10-27 07:26:50,651 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,652 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf6280001 closed
2015-10-27 07:26:50,652 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 2992 more ms
2015-10-27 07:26:50,652 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54421 which had sessionid 0x150a90cf6280001
2015-10-27 07:26:50,653 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf6280001
2015-10-27 07:26:50,653 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:50,655 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,655 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:50,656 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:26:50,656 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:50,658 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,658 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #10 active...
2015-10-27 07:26:50,658 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #10 to active state
2015-10-27 07:26:50,659 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:50,660 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:51,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:51,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:51,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:51,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:51,272 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:51,272 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:51,862 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:26:52,376 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:52,477 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:26:52,478 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:52,478 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(748)) - org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
2015-10-27 07:26:53,647 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,648 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,648 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11225 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2fb7818b
2015-10-27 07:26:53,650 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11225. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:53,650 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11225, initiating session
2015-10-27 07:26:53,650 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54427
2015-10-27 07:26:53,651 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54427
2015-10-27 07:26:53,660 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90cf6280003 with negotiated timeout 6000 for client /127.0.0.1:54427
2015-10-27 07:26:53,660 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11225, sessionid = 0x150a90cf6280003, negotiated timeout = 6000
2015-10-27 07:26:53,662 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,662 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54427
2015-10-27 07:26:53,662 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54427
2015-10-27 07:26:53,664 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,664 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:53,664 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90cf6280003 type:create cxid:0x1 zxid:0xf txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:53,666 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,666 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,666 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #9 should become standby
2015-10-27 07:26:53,667 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #9 to standby state
2015-10-27 07:26:53,667 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,669 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,716 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54422
2015-10-27 07:26:53,716 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54424
2015-10-27 07:26:53,728 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:53,729 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54422
2015-10-27 07:26:53,730 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:53,730 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1159998485 appData=00000009 cb=Elector callbacks for DummyHAService #9
2015-10-27 07:26:53,731 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:53,731 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:53,731 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54424
2015-10-27 07:26:53,731 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=73340795 appData=0000000a cb=Elector callbacks for DummyHAService #10
2015-10-27 07:26:53,732 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf6280003
2015-10-27 07:26:53,733 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90cf6280002
2015-10-27 07:26:53,733 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54427 which had sessionid 0x150a90cf6280003
2015-10-27 07:26:53,733 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf6280003 closed
2015-10-27 07:26:53,733 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:53,734 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:53,734 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 28629
2015-10-27 07:26:53,734 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 19
2015-10-27 07:26:53,735 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testCedeActive
2015-10-27 07:26:53,734 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54423 which had sessionid 0x150a90cf6280002
2015-10-27 07:26:53,735 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:53,735 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:53,734 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90cf6280002 closed
2015-10-27 07:26:53,736 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:53,736 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90cf6280002
2015-10-27 07:26:53,736 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:53,736 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:53,737 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:53,737 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:53,737 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:53,737 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:53,738 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:53,738 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:53,739 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:53,740 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11225
2015-10-27 07:26:53,741 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testCedeActive
2015-10-27 07:26:53,741 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testCedeActive
2015-10-27 07:26:53,742 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11226
2015-10-27 07:26:53,742 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testNoZK
2015-10-27 07:26:53,743 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:53,743 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test58831450351021871.junit.dir/version-2 snapdir build/test58831450351021871.junit.dir/version-2
2015-10-27 07:26:53,744 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11226
2015-10-27 07:26:53,745 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11226
2015-10-27 07:26:53,746 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54429
2015-10-27 07:26:53,747 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54429
2015-10-27 07:26:53,747 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:53,748 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54429 (no session established for client)
2015-10-27 07:26:53,748 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:53,775 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testNoZK
2015-10-27 07:26:53,775 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:53,776 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:53,776 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:53,776 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:53,777 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:53,777 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:53,777 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:53,777 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:53,777 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:53,778 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11226
2015-10-27 07:26:53,779 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11226 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@f3dbccf
2015-10-27 07:26:53,780 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11226. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:53,780 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:54,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:54,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:26:54,883 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11226. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:54,884 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:55,832 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:55,833 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:26:55,833 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@485ff368
2015-10-27 07:26:55,834 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:55,835 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:55,986 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11226. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:55,987 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:56,937 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:56,938 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:57,089 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11226. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:57,090 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:57,480 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:26:57,480 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@602fc7b3
2015-10-27 07:26:57,481 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:57,482 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:58,042 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:58,042 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:58,192 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11226. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:58,193 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:58,585 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:58,586 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:58,781 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:26:59,144 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,145 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:59,296 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11226. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,397 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:26:59,398 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,398 FATAL ha.ZKFailoverController (ZKFailoverController.java:doRun(191)) - Unable to start failover controller. Unable to connect to ZooKeeper quorum at 127.0.0.1:11226. Please check the configured value for ha.zookeeper.quorum and ensure that ZooKeeper is running.
2015-10-27 07:26:59,398 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 34190
2015-10-27 07:26:59,399 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 14
2015-10-27 07:26:59,399 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testNoZK
2015-10-27 07:26:59,399 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:59,399 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:59,400 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testNoZK
2015-10-27 07:26:59,400 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testNoZK
2015-10-27 07:26:59,401 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11227
2015-10-27 07:26:59,402 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testFencingMustBeConfigured
2015-10-27 07:26:59,403 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:59,403 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test6005038977792539411.junit.dir/version-2 snapdir build/test6005038977792539411.junit.dir/version-2
2015-10-27 07:26:59,404 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11227
2015-10-27 07:26:59,407 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11227
2015-10-27 07:26:59,407 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54443
2015-10-27 07:26:59,408 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54443
2015-10-27 07:26:59,408 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:59,409 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54443 (no session established for client)
2015-10-27 07:26:59,410 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:59,441 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testFencingMustBeConfigured
2015-10-27 07:26:59,491 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11227 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@3264c826
2015-10-27 07:26:59,492 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,492 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11227, initiating session
2015-10-27 07:26:59,492 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54444
2015-10-27 07:26:59,493 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54444
2015-10-27 07:26:59,493 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:59,504 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d194d0000 with negotiated timeout 6000 for client /127.0.0.1:54444
2015-10-27 07:26:59,505 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11227, sessionid = 0x150a90d194d0000, negotiated timeout = 6000
2015-10-27 07:26:59,506 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d194d0000
2015-10-27 07:26:59,506 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54444
2015-10-27 07:26:59,507 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54444
2015-10-27 07:26:59,507 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1329914004 appData=null cb=Elector callbacks for DummyHAService #13
2015-10-27 07:26:59,508 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:59,510 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:59,512 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:59,513 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1329914004 appData=null cb=Elector callbacks for DummyHAService #13
2015-10-27 07:26:59,514 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d194d0000
2015-10-27 07:26:59,516 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54444 which had sessionid 0x150a90d194d0000
2015-10-27 07:26:59,516 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,516 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d194d0000 closed
2015-10-27 07:26:59,518 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11227 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@64702525
2015-10-27 07:26:59,519 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11227. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,519 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11227, initiating session
2015-10-27 07:26:59,519 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54445
2015-10-27 07:26:59,520 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54445
2015-10-27 07:26:59,521 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d194d0001 with negotiated timeout 6000 for client /127.0.0.1:54445
2015-10-27 07:26:59,522 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11227, sessionid = 0x150a90d194d0001, negotiated timeout = 6000
2015-10-27 07:26:59,527 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54445
2015-10-27 07:26:59,527 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54445
2015-10-27 07:26:59,528 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1943523591 appData=null cb=Elector callbacks for DummyHAService #13
2015-10-27 07:26:59,529 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1943523591 appData=null cb=Elector callbacks for DummyHAService #13
2015-10-27 07:26:59,529 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:59,532 FATAL ha.ZKFailoverController (ZKFailoverController.java:doRun(226)) - Fencing is not configured for DummyHAService #13.
You must configure a fencing method before using automatic failover.
org.apache.hadoop.ha.BadFencingConfigurationException: no fencing
	at org.apache.hadoop.ha.ZKFailoverController.doRun(ZKFailoverController.java:224)
	at org.apache.hadoop.ha.ZKFailoverController.access$000(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$1.run(ZKFailoverController.java:170)
	at org.apache.hadoop.ha.ZKFailoverController$1.run(ZKFailoverController.java:166)
	at org.apache.hadoop.security.SecurityUtil.doAsLoginUserOrFatal(SecurityUtil.java:412)
	at org.apache.hadoop.ha.ZKFailoverController.run(ZKFailoverController.java:166)
	at org.apache.hadoop.ha.TestZKFailoverController.runFC(TestZKFailoverController.java:610)
	at org.apache.hadoop.ha.TestZKFailoverController.testFencingMustBeConfigured(TestZKFailoverController.java:195)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.apache.zookeeper.JUnit4ZKTestRunner$LoggedInvokeMethod.evaluate(JUnit4ZKTestRunner.java:52)
	at org.junit.internal.runners.statements.FailOnTimeout$StatementThread.run(FailOnTimeout.java:74)
2015-10-27 07:26:59,533 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1943523591 appData=null cb=Elector callbacks for DummyHAService #13
2015-10-27 07:26:59,534 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d194d0001
2015-10-27 07:26:59,535 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54445 which had sessionid 0x150a90d194d0001
2015-10-27 07:26:59,535 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,535 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d194d0001 closed
2015-10-27 07:26:59,535 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 6500
2015-10-27 07:26:59,536 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 20
2015-10-27 07:26:59,536 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testFencingMustBeConfigured
2015-10-27 07:26:59,536 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:59,536 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:59,537 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:59,538 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:59,538 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:59,538 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:59,538 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:59,538 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:59,539 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:59,539 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:59,540 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11227
2015-10-27 07:26:59,541 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testFencingMustBeConfigured
2015-10-27 07:26:59,542 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testFencingMustBeConfigured
2015-10-27 07:26:59,542 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11228
2015-10-27 07:26:59,543 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testWontRunWhenAutoFailoverDisabled
2015-10-27 07:26:59,544 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:59,544 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test5192929163902975923.junit.dir/version-2 snapdir build/test5192929163902975923.junit.dir/version-2
2015-10-27 07:26:59,545 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11228
2015-10-27 07:26:59,547 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11228
2015-10-27 07:26:59,548 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54447
2015-10-27 07:26:59,549 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54447
2015-10-27 07:26:59,550 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:59,551 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54447 (no session established for client)
2015-10-27 07:26:59,551 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:59,580 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testWontRunWhenAutoFailoverDisabled
2015-10-27 07:26:59,583 FATAL ha.ZKFailoverController (ZKFailoverController.java:run(159)) - Automatic failover is not enabled for DummyHAService #16. Please ensure that automatic failover is enabled in the configuration before running the ZK failover controller.
2015-10-27 07:26:59,584 FATAL ha.ZKFailoverController (ZKFailoverController.java:run(159)) - Automatic failover is not enabled for DummyHAService #16. Please ensure that automatic failover is enabled in the configuration before running the ZK failover controller.
2015-10-27 07:26:59,584 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 10565
2015-10-27 07:26:59,584 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 21
2015-10-27 07:26:59,584 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testWontRunWhenAutoFailoverDisabled
2015-10-27 07:26:59,584 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:59,585 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:59,585 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:59,586 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:59,586 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:59,586 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:59,586 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:59,586 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:59,586 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:59,587 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:59,587 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11228
2015-10-27 07:26:59,588 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testWontRunWhenAutoFailoverDisabled
2015-10-27 07:26:59,589 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testWontRunWhenAutoFailoverDisabled
2015-10-27 07:26:59,589 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11229
2015-10-27 07:26:59,590 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testAutoFailoverOnBadHealth
2015-10-27 07:26:59,590 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:59,591 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test3892697961855814186.junit.dir/version-2 snapdir build/test3892697961855814186.junit.dir/version-2
2015-10-27 07:26:59,591 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11229
2015-10-27 07:26:59,593 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11229
2015-10-27 07:26:59,594 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54449
2015-10-27 07:26:59,595 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54449
2015-10-27 07:26:59,595 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:59,596 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54449 (no session established for client)
2015-10-27 07:26:59,596 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:59,625 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testAutoFailoverOnBadHealth
2015-10-27 07:26:59,626 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11229 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@a8a47d9
2015-10-27 07:26:59,627 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,628 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11229, initiating session
2015-10-27 07:26:59,628 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54450
2015-10-27 07:26:59,629 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54450
2015-10-27 07:26:59,629 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:59,630 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1a080000 with negotiated timeout 6000 for client /127.0.0.1:54450
2015-10-27 07:26:59,631 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11229, sessionid = 0x150a90d1a080000, negotiated timeout = 6000
2015-10-27 07:26:59,631 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2034481706 appData=null cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,632 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54450
2015-10-27 07:26:59,632 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54450
2015-10-27 07:26:59,633 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:59,635 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:59,637 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:59,638 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2034481706 appData=null cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,638 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1a080000
2015-10-27 07:26:59,639 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1a080000 closed
2015-10-27 07:26:59,639 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54450 which had sessionid 0x150a90d1a080000
2015-10-27 07:26:59,640 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1a080000
2015-10-27 07:26:59,640 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,640 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:26:59,640 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11229 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@4288008f
2015-10-27 07:26:59,641 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,642 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11229, initiating session
2015-10-27 07:26:59,642 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54451
2015-10-27 07:26:59,643 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54451
2015-10-27 07:26:59,644 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1a080001 with negotiated timeout 6000 for client /127.0.0.1:54451
2015-10-27 07:26:59,644 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11229, sessionid = 0x150a90d1a080001, negotiated timeout = 6000
2015-10-27 07:26:59,645 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=329669919 appData=null cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,645 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=329669919 appData=null cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,645 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:59,645 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54451
2015-10-27 07:26:59,646 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54451
2015-10-27 07:26:59,647 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:59,647 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54452
2015-10-27 07:26:59,651 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:59,651 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54452: starting
2015-10-27 07:26:59,652 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:59,653 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #17 entered state: SERVICE_HEALTHY
2015-10-27 07:26:59,654 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,656 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,656 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:59,657 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:26:59,657 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:59,659 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,660 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #17 active...
2015-10-27 07:26:59,660 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #17 to active state
2015-10-27 07:26:59,661 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,662 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,688 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,688 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:26:59,691 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:26:59,692 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11229 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@209197a2
2015-10-27 07:26:59,693 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,694 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11229, initiating session
2015-10-27 07:26:59,694 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54454
2015-10-27 07:26:59,694 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54454
2015-10-27 07:26:59,696 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1a080002 with negotiated timeout 6000 for client /127.0.0.1:54454
2015-10-27 07:26:59,696 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11229, sessionid = 0x150a90d1a080002, negotiated timeout = 6000
2015-10-27 07:26:59,698 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=927203166 appData=null cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,699 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54454
2015-10-27 07:26:59,699 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=927203166 appData=null cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,699 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:59,699 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54454
2015-10-27 07:26:59,701 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:26:59,702 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54455
2015-10-27 07:26:59,706 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:26:59,706 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54455: starting
2015-10-27 07:26:59,707 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:59,708 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #18 entered state: SERVICE_HEALTHY
2015-10-27 07:26:59,708 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,709 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d1a080002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:26:59,710 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,711 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,711 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #18 should become standby
2015-10-27 07:26:59,712 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #18 to standby state
2015-10-27 07:26:59,712 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,715 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,743 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testAutoFailoverOnBadHealth(211)) - Faking svc0 unhealthy, should failover to svc1
2015-10-27 07:26:59,743 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testAutoFailoverOnBadHealth(214)) - Waiting for svc0 to enter standby state
2015-10-27 07:26:59,755 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #17: not healthy
2015-10-27 07:26:59,755 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_UNHEALTHY
2015-10-27 07:26:59,755 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #17 entered state: SERVICE_UNHEALTHY
2015-10-27 07:26:59,756 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(766)) - Quitting master election for DummyHAService #17 and marking that fencing is necessary
2015-10-27 07:26:59,756 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:59,756 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,757 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1a080001
2015-10-27 07:26:59,758 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54451 which had sessionid 0x150a90d1a080001
2015-10-27 07:26:59,758 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,758 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1a080001 closed
2015-10-27 07:26:59,759 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1a080001
2015-10-27 07:26:59,759 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,760 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,761 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:59,762 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000011
2015-10-27 07:26:59,762 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #17
2015-10-27 07:26:59,763 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #17 to standby state without fencing
2015-10-27 07:26:59,763 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:59,765 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,765 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #18 active...
2015-10-27 07:26:59,766 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #18 to active state
2015-10-27 07:26:59,766 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,767 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,794 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testAutoFailoverOnBadHealth(218)) - Allowing svc0 to be healthy again, making svc1 unreachable and fail to gracefully go to standby
2015-10-27 07:26:59,810 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:26:59,810 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #17 entered state: SERVICE_HEALTHY
2015-10-27 07:26:59,811 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(209)) - Transport-level exception trying to monitor health of DummyHAService #18: Connection refused (fake)
2015-10-27 07:26:59,811 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,811 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_NOT_RESPONDING
2015-10-27 07:26:59,811 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #18 entered state: SERVICE_NOT_RESPONDING
2015-10-27 07:26:59,811 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(766)) - Quitting master election for DummyHAService #18 and marking that fencing is necessary
2015-10-27 07:26:59,812 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:59,812 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,812 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11229 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@6c05b57b
2015-10-27 07:26:59,812 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=927203166 appData=00000012 cb=Elector callbacks for DummyHAService #18
2015-10-27 07:26:59,813 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1a080002
2015-10-27 07:26:59,813 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11229. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,813 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11229, initiating session
2015-10-27 07:26:59,814 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54456
2015-10-27 07:26:59,814 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1a080002 closed
2015-10-27 07:26:59,814 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1a080002
2015-10-27 07:26:59,814 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,814 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54454 which had sessionid 0x150a90d1a080002
2015-10-27 07:26:59,815 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54456
2015-10-27 07:26:59,816 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1a080003 with negotiated timeout 6000 for client /127.0.0.1:54456
2015-10-27 07:26:59,816 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11229, sessionid = 0x150a90d1a080003, negotiated timeout = 6000
2015-10-27 07:26:59,817 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,817 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,818 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:26:59,818 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54456
2015-10-27 07:26:59,818 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54456
2015-10-27 07:26:59,820 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,820 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:26:59,821 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000012
2015-10-27 07:26:59,821 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #18
2015-10-27 07:26:59,823 WARN  ha.FailoverController (FailoverController.java:tryGracefulFence(178)) - Unable to gracefully make DummyHAService #18 standby (unable to connect)
java.io.IOException: Connection refused (fake)
	at org.apache.hadoop.ha.DummyHAService$MockHAProtocolImpl.checkUnreachable(DummyHAService.java:179)
	at org.apache.hadoop.ha.DummyHAService$MockHAProtocolImpl.transitionToStandby(DummyHAService.java:157)
	at org.apache.hadoop.ha.FailoverController.tryGracefulFence(FailoverController.java:172)
	at org.apache.hadoop.ha.ZKFailoverController.doFence(ZKFailoverController.java:512)
	at org.apache.hadoop.ha.ZKFailoverController.fenceOldActive(ZKFailoverController.java:503)
	at org.apache.hadoop.ha.ZKFailoverController.access$1100(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$ElectorCallbacks.fenceOldActive(ZKFailoverController.java:890)
	at org.apache.hadoop.ha.ActiveStandbyElector.fenceOldActive(ActiveStandbyElector.java:902)
	at org.apache.hadoop.ha.ActiveStandbyElector.becomeActive(ActiveStandbyElector.java:801)
	at org.apache.hadoop.ha.ActiveStandbyElector.processResult(ActiveStandbyElector.java:416)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
2015-10-27 07:26:59,823 INFO  ha.NodeFencer (NodeFencer.java:fence(91)) - ====== Beginning Service Fencing Process... ======
2015-10-27 07:26:59,823 INFO  ha.NodeFencer (NodeFencer.java:fence(94)) - Trying method 1/1: org.apache.hadoop.ha.DummyHAService.DummyFencer(null)
2015-10-27 07:26:59,823 INFO  ha.DummyHAService (DummyHAService.java:tryFence(196)) - tryFence(DummyHAService #18)
2015-10-27 07:26:59,824 INFO  ha.NodeFencer (NodeFencer.java:fence(98)) - ====== Fencing successful by method org.apache.hadoop.ha.DummyHAService.DummyFencer(null) ======
2015-10-27 07:26:59,824 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:26:59,825 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,826 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #17 active...
2015-10-27 07:26:59,826 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #17 to active state
2015-10-27 07:26:59,826 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,827 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,848 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54452
2015-10-27 07:26:59,848 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54455
2015-10-27 07:26:59,853 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54452
2015-10-27 07:26:59,853 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:59,853 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:59,854 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=329669919 appData=00000011 cb=Elector callbacks for DummyHAService #17
2015-10-27 07:26:59,856 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54455
2015-10-27 07:26:59,856 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1a080003
2015-10-27 07:26:59,856 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:26:59,856 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:26:59,856 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:59,857 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1a080003 closed
2015-10-27 07:26:59,858 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:26:59,858 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1a080003
2015-10-27 07:26:59,858 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,858 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 21563
2015-10-27 07:26:59,859 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 24
2015-10-27 07:26:59,859 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testAutoFailoverOnBadHealth
2015-10-27 07:26:59,857 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d1a080003, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:26:59,859 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:59,859 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54456 which had sessionid 0x150a90d1a080003
2015-10-27 07:26:59,859 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:59,860 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:59,860 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:59,861 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:59,861 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:59,861 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:59,861 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:59,861 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:59,862 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:59,862 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11229
2015-10-27 07:26:59,864 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testAutoFailoverOnBadHealth
2015-10-27 07:26:59,864 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testAutoFailoverOnBadHealth
2015-10-27 07:26:59,865 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11230
2015-10-27 07:26:59,865 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testFormatSetsAcls
2015-10-27 07:26:59,866 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:59,866 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test8603201987766314834.junit.dir/version-2 snapdir build/test8603201987766314834.junit.dir/version-2
2015-10-27 07:26:59,866 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11230
2015-10-27 07:26:59,868 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11230
2015-10-27 07:26:59,869 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54458
2015-10-27 07:26:59,870 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54458
2015-10-27 07:26:59,870 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:26:59,871 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54458 (no session established for client)
2015-10-27 07:26:59,871 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:26:59,915 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testFormatSetsAcls
2015-10-27 07:26:59,915 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11230 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@36b93e8f
2015-10-27 07:26:59,916 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11230. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,917 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11230, initiating session
2015-10-27 07:26:59,917 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54459
2015-10-27 07:26:59,917 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54459
2015-10-27 07:26:59,918 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:26:59,919 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b1b0000 with negotiated timeout 6000 for client /127.0.0.1:54459
2015-10-27 07:26:59,919 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11230, sessionid = 0x150a90d1b1b0000, negotiated timeout = 6000
2015-10-27 07:26:59,920 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=443835483 appData=null cb=Elector callbacks for DummyHAService #20
2015-10-27 07:26:59,920 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54459
2015-10-27 07:26:59,920 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54459
2015-10-27 07:26:59,921 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:26:59,923 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:26:59,924 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:26:59,924 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=443835483 appData=null cb=Elector callbacks for DummyHAService #20
2015-10-27 07:26:59,925 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b1b0000
2015-10-27 07:26:59,926 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b1b0000 closed
2015-10-27 07:26:59,926 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54459 which had sessionid 0x150a90d1b1b0000
2015-10-27 07:26:59,926 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1b1b0000
2015-10-27 07:26:59,926 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,926 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11230 sessionTimeout=30000 watcher=org.apache.hadoop.ha.ClientBaseWithFixes$CountdownWatcher@7ae4c18d
2015-10-27 07:26:59,927 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11230. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:26:59,928 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11230, initiating session
2015-10-27 07:26:59,928 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54460
2015-10-27 07:26:59,928 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54460
2015-10-27 07:26:59,930 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b1b0001 with negotiated timeout 30000 for client /127.0.0.1:54460
2015-10-27 07:26:59,930 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11230, sessionid = 0x150a90d1b1b0001, negotiated timeout = 30000
2015-10-27 07:26:59,931 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 25956
2015-10-27 07:26:59,931 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 25
2015-10-27 07:26:59,931 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testFormatSetsAcls
2015-10-27 07:26:59,933 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:26:59,935 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b1b0001
2015-10-27 07:26:59,936 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54460 which had sessionid 0x150a90d1b1b0001
2015-10-27 07:26:59,941 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b1b0001 closed
2015-10-27 07:26:59,942 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:26:59,942 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:26:59,947 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:26:59,966 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:26:59,966 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:26:59,966 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:26:59,966 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:26:59,966 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:26:59,966 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:26:59,969 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:26:59,980 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11230
2015-10-27 07:26:59,982 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testFormatSetsAcls
2015-10-27 07:26:59,982 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testFormatSetsAcls
2015-10-27 07:26:59,982 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11231
2015-10-27 07:26:59,983 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testGracefulFailover
2015-10-27 07:26:59,983 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:26:59,984 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test4927899219762757877.junit.dir/version-2 snapdir build/test4927899219762757877.junit.dir/version-2
2015-10-27 07:26:59,984 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11231
2015-10-27 07:27:00,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:00,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:00,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:00,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:00,013 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11231
2015-10-27 07:27:00,014 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54462
2015-10-27 07:27:00,014 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54462
2015-10-27 07:27:00,015 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:00,016 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54462 (no session established for client)
2015-10-27 07:27:00,016 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:00,039 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testGracefulFailover
2015-10-27 07:27:00,040 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@4ef69826
2015-10-27 07:27:00,041 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,041 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11231, initiating session
2015-10-27 07:27:00,041 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54463
2015-10-27 07:27:00,042 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54463
2015-10-27 07:27:00,042 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:00,043 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b970000 with negotiated timeout 6000 for client /127.0.0.1:54463
2015-10-27 07:27:00,043 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x150a90d1b970000, negotiated timeout = 6000
2015-10-27 07:27:00,044 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=112380796 appData=null cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,044 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=112380796 appData=null cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,044 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54463
2015-10-27 07:27:00,045 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:00,045 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54463
2015-10-27 07:27:00,046 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:00,047 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:00,049 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:00,049 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=112380796 appData=null cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,049 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b970000
2015-10-27 07:27:00,050 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b970000 closed
2015-10-27 07:27:00,051 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:00,050 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54463 which had sessionid 0x150a90d1b970000
2015-10-27 07:27:00,051 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:00,052 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5e34123c
2015-10-27 07:27:00,052 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,053 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11231, initiating session
2015-10-27 07:27:00,053 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54464
2015-10-27 07:27:00,054 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54464
2015-10-27 07:27:00,055 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b970001 with negotiated timeout 6000 for client /127.0.0.1:54464
2015-10-27 07:27:00,055 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x150a90d1b970001, negotiated timeout = 6000
2015-10-27 07:27:00,055 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=185009116 appData=null cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,055 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=185009116 appData=null cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,056 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:00,056 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54464
2015-10-27 07:27:00,056 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54464
2015-10-27 07:27:00,057 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:00,058 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54465
2015-10-27 07:27:00,062 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:00,062 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54465: starting
2015-10-27 07:27:00,063 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:00,064 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #21 entered state: SERVICE_HEALTHY
2015-10-27 07:27:00,064 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,066 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,066 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:00,067 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:00,067 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:00,069 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,070 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #21 active...
2015-10-27 07:27:00,071 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #21 to active state
2015-10-27 07:27:00,071 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,073 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,102 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:00,103 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@232bb287
2015-10-27 07:27:00,104 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,105 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11231, initiating session
2015-10-27 07:27:00,105 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54466
2015-10-27 07:27:00,105 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54466
2015-10-27 07:27:00,106 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b970002 with negotiated timeout 6000 for client /127.0.0.1:54466
2015-10-27 07:27:00,106 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x150a90d1b970002, negotiated timeout = 6000
2015-10-27 07:27:00,107 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=574599225 appData=null cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,108 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54466
2015-10-27 07:27:00,108 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54466
2015-10-27 07:27:00,109 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:00,110 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=574599225 appData=null cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,110 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:00,110 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54467
2015-10-27 07:27:00,114 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:00,114 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54467: starting
2015-10-27 07:27:00,116 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:00,116 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #22 entered state: SERVICE_HEALTHY
2015-10-27 07:27:00,117 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,118 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d1b970002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:00,119 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,119 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,119 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #22 should become standby
2015-10-27 07:27:00,120 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #22 to standby state
2015-10-27 07:27:00,120 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,122 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,155 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(650)) - Asking DummyHAService #21 to cede its active state for 10000ms
2015-10-27 07:27:00,156 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:27:00,157 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(575)) - Successfully ensured local node is in standby mode
2015-10-27 07:27:00,157 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:00,157 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:tryDeleteOwnBreadCrumbNode(844)) - Deleting bread-crumb of active node...
2015-10-27 07:27:00,160 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,160 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b970001
2015-10-27 07:27:00,161 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,161 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b970001 closed
2015-10-27 07:27:00,162 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 9995 more ms
2015-10-27 07:27:00,162 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d1b970001, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:27:00,163 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1b970001
2015-10-27 07:27:00,163 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:00,164 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54464 which had sessionid 0x150a90d1b970001
2015-10-27 07:27:00,165 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,165 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:00,166 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:00,166 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:00,168 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,168 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #22 active...
2015-10-27 07:27:00,168 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #22 to active state
2015-10-27 07:27:00,169 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,169 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,169 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,169 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@7a6eb29d
2015-10-27 07:27:00,170 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,171 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,171 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11231, initiating session
2015-10-27 07:27:00,171 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54468
2015-10-27 07:27:00,172 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54468
2015-10-27 07:27:00,173 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b970003 with negotiated timeout 6000 for client /127.0.0.1:54468
2015-10-27 07:27:00,173 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x150a90d1b970003, negotiated timeout = 6000
2015-10-27 07:27:00,174 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,174 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(679)) - Successfully became active. Successfully transitioned DummyHAService #22 to active state
2015-10-27 07:27:00,175 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,175 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:00,175 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54468
2015-10-27 07:27:00,175 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54468
2015-10-27 07:27:00,176 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d1b970003 type:create cxid:0x1 zxid:0xf txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:00,177 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(650)) - Asking DummyHAService #22 to cede its active state for 10000ms
2015-10-27 07:27:00,177 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,178 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,178 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:27:00,178 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #21 should become standby
2015-10-27 07:27:00,178 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(575)) - Successfully ensured local node is in standby mode
2015-10-27 07:27:00,178 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:00,179 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:tryDeleteOwnBreadCrumbNode(844)) - Deleting bread-crumb of active node...
2015-10-27 07:27:00,179 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #21 to standby state
2015-10-27 07:27:00,180 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,181 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,182 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,183 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b970002
2015-10-27 07:27:00,184 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b970002 closed
2015-10-27 07:27:00,184 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,184 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 9994 more ms
2015-10-27 07:27:00,185 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54466 which had sessionid 0x150a90d1b970002
2015-10-27 07:27:00,185 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1b970002
2015-10-27 07:27:00,185 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:00,186 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,187 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:00,187 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:00,187 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:00,189 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,189 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #21 active...
2015-10-27 07:27:00,189 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #21 to active state
2015-10-27 07:27:00,190 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,190 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,190 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,190 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11231 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@10310199
2015-10-27 07:27:00,191 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:00,203 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11231. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,204 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11231, initiating session
2015-10-27 07:27:00,204 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54469
2015-10-27 07:27:00,206 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54469
2015-10-27 07:27:00,207 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d1b970004 with negotiated timeout 6000 for client /127.0.0.1:54469
2015-10-27 07:27:00,207 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11231, sessionid = 0x150a90d1b970004, negotiated timeout = 6000
2015-10-27 07:27:00,208 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,209 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(679)) - Successfully became active. Successfully transitioned DummyHAService #21 to active state
2015-10-27 07:27:00,209 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,209 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:00,209 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54469
2015-10-27 07:27:00,210 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54469
2015-10-27 07:27:00,210 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d1b970004 type:create cxid:0x1 zxid:0x15 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:00,211 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,212 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,212 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #22 should become standby
2015-10-27 07:27:00,212 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #22 to standby state
2015-10-27 07:27:00,213 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,214 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:00,248 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,248 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:00,791 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:00,792 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:00,835 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:27:01,350 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:01,451 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:27:01,452 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:01,452 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(748)) - org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
2015-10-27 07:27:01,893 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:01,894 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:02,482 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:27:02,996 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:03,097 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:27:03,097 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(748)) - org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
2015-10-27 07:27:03,097 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:06,453 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:27:06,453 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2315da09
2015-10-27 07:27:06,455 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:06,455 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:07,558 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:07,558 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:08,099 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=610939666 appData=00000002 cb=Elector callbacks for DummyHAService #2
2015-10-27 07:27:08,099 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@333481d2
2015-10-27 07:27:08,100 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:08,101 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:08,661 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:08,661 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:09,203 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:09,204 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:09,763 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:09,764 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:10,158 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:10,179 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:10,211 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54467
2015-10-27 07:27:10,211 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54465
2015-10-27 07:27:10,219 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:10,219 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:10,219 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54467
2015-10-27 07:27:10,220 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=574599225 appData=00000016 cb=Elector callbacks for DummyHAService #22
2015-10-27 07:27:10,222 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:10,222 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54465
2015-10-27 07:27:10,222 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=185009116 appData=00000015 cb=Elector callbacks for DummyHAService #21
2015-10-27 07:27:10,222 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b970004
2015-10-27 07:27:10,222 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:10,223 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d1b970003
2015-10-27 07:27:10,232 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54469 which had sessionid 0x150a90d1b970004
2015-10-27 07:27:10,233 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b970004 closed
2015-10-27 07:27:10,233 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:10,234 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:10,234 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54468 which had sessionid 0x150a90d1b970003
2015-10-27 07:27:10,234 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d1b970003 closed
2015-10-27 07:27:10,234 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:10,235 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d1b970003
2015-10-27 07:27:10,235 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:10,236 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 9694
2015-10-27 07:27:10,236 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 22
2015-10-27 07:27:10,236 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testGracefulFailover
2015-10-27 07:27:10,236 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:10,237 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:10,237 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:10,237 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:10,237 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:10,237 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:10,238 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:10,238 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:10,238 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:10,238 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:10,239 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11231
2015-10-27 07:27:10,240 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testGracefulFailover
2015-10-27 07:27:10,240 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testGracefulFailover
2015-10-27 07:27:10,241 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11232
2015-10-27 07:27:10,242 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testAutoFailoverOnLostZKSession
2015-10-27 07:27:10,242 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:10,243 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test8743122776690958816.junit.dir/version-2 snapdir build/test8743122776690958816.junit.dir/version-2
2015-10-27 07:27:10,243 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11232
2015-10-27 07:27:10,245 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11232
2015-10-27 07:27:10,246 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54482
2015-10-27 07:27:10,246 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54482
2015-10-27 07:27:10,247 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:10,248 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54482 (no session established for client)
2015-10-27 07:27:10,248 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:10,272 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testAutoFailoverOnLostZKSession
2015-10-27 07:27:10,273 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11232 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5c03d673
2015-10-27 07:27:10,274 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:10,274 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:10,275 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54483
2015-10-27 07:27:10,275 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54483
2015-10-27 07:27:10,275 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:10,277 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d43a40000 with negotiated timeout 6000 for client /127.0.0.1:54483
2015-10-27 07:27:10,277 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11232, sessionid = 0x150a90d43a40000, negotiated timeout = 6000
2015-10-27 07:27:10,278 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=956998257 appData=null cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,279 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54483
2015-10-27 07:27:10,279 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54483
2015-10-27 07:27:10,280 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:10,283 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:10,287 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:10,287 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=956998257 appData=null cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,288 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d43a40000
2015-10-27 07:27:10,290 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54483 which had sessionid 0x150a90d43a40000
2015-10-27 07:27:10,290 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d43a40000 closed
2015-10-27 07:27:10,292 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40000
2015-10-27 07:27:10,292 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:10,292 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11232 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2f9dc6f7
2015-10-27 07:27:10,292 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:10,294 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:10,294 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:10,295 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54484
2015-10-27 07:27:10,295 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54484
2015-10-27 07:27:10,297 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d43a40001 with negotiated timeout 6000 for client /127.0.0.1:54484
2015-10-27 07:27:10,297 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11232, sessionid = 0x150a90d43a40001, negotiated timeout = 6000
2015-10-27 07:27:10,298 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1469216097 appData=null cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,298 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54484
2015-10-27 07:27:10,298 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1469216097 appData=null cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,299 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:10,299 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54484
2015-10-27 07:27:10,300 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:10,301 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54485
2015-10-27 07:27:10,308 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:10,309 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:10,310 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:10,310 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54485: starting
2015-10-27 07:27:10,312 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:10,313 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #23 entered state: SERVICE_HEALTHY
2015-10-27 07:27:10,313 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,316 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,316 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:10,318 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:10,318 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:10,320 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,321 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #23 active...
2015-10-27 07:27:10,322 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #23 to active state
2015-10-27 07:27:10,322 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,323 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,343 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:10,344 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11232 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@244e0d38
2015-10-27 07:27:10,345 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:10,346 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:10,346 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54487
2015-10-27 07:27:10,346 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54487
2015-10-27 07:27:10,347 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d43a40002 with negotiated timeout 6000 for client /127.0.0.1:54487
2015-10-27 07:27:10,347 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11232, sessionid = 0x150a90d43a40002, negotiated timeout = 6000
2015-10-27 07:27:10,348 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1236019230 appData=null cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,348 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1236019230 appData=null cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,348 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54487
2015-10-27 07:27:10,348 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:10,349 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54487
2015-10-27 07:27:10,350 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:10,350 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54488
2015-10-27 07:27:10,354 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:10,354 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54488: starting
2015-10-27 07:27:10,355 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:10,355 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #24 entered state: SERVICE_HEALTHY
2015-10-27 07:27:10,356 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,357 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d43a40002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:10,358 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,358 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,358 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #24 should become standby
2015-10-27 07:27:10,359 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #24 to standby state
2015-10-27 07:27:10,359 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,361 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,395 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 0's zookeeper session 94761466609270785
2015-10-27 07:27:10,395 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d43a40001
2015-10-27 07:27:10,396 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d43a40001
2015-10-27 07:27:10,397 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54484 which had sessionid 0x150a90d43a40001
2015-10-27 07:27:10,397 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,397 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,398 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,397 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d43a40001, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:10,399 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,399 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:10,401 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000017
2015-10-27 07:27:10,401 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #23
2015-10-27 07:27:10,402 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #23 to standby state without fencing
2015-10-27 07:27:10,402 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:10,403 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,403 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #24 active...
2015-10-27 07:27:10,404 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #24 to active state
2015-10-27 07:27:10,404 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,405 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,447 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 1's zookeeper session 94761466609270786
2015-10-27 07:27:10,447 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d43a40002
2015-10-27 07:27:10,447 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d43a40002
2015-10-27 07:27:10,448 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54487 which had sessionid 0x150a90d43a40002
2015-10-27 07:27:10,448 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,449 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d43a40002, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:10,449 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,466 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #23 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:10,466 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:10,467 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:10,499 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d43a40001 closed
2015-10-27 07:27:10,499 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40001
2015-10-27 07:27:10,499 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40001
2015-10-27 07:27:10,500 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:10,550 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 915 more ms
2015-10-27 07:27:10,551 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -4 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,551 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(440)) - Received create error from Zookeeper. code:CONNECTIONLOSS for path /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:10,551 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(444)) - Retrying createNode createRetryCount: 0
2015-10-27 07:27:10,552 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:10,552 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:27:10,602 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 864 more ms
2015-10-27 07:27:10,652 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 813 more ms
2015-10-27 07:27:10,704 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 762 more ms
2015-10-27 07:27:10,756 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 710 more ms
2015-10-27 07:27:10,807 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 658 more ms
2015-10-27 07:27:10,858 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 608 more ms
2015-10-27 07:27:10,866 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:10,867 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:10,909 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 557 more ms
2015-10-27 07:27:10,960 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 505 more ms
2015-10-27 07:27:11,014 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 452 more ms
2015-10-27 07:27:11,065 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 400 more ms
2015-10-27 07:27:11,116 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 349 more ms
2015-10-27 07:27:11,169 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 297 more ms
2015-10-27 07:27:11,220 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 246 more ms
2015-10-27 07:27:11,271 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 195 more ms
2015-10-27 07:27:11,323 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 143 more ms
2015-10-27 07:27:11,373 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 92 more ms
2015-10-27 07:27:11,411 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:11,412 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:11,425 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 41 more ms
2015-10-27 07:27:11,456 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:27:11,468 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,468 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,468 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11232 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@57b6ac25
2015-10-27 07:27:11,469 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:11,470 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:11,470 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54491
2015-10-27 07:27:11,470 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54491
2015-10-27 07:27:11,479 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d43a40003 with negotiated timeout 6000 for client /127.0.0.1:54491
2015-10-27 07:27:11,479 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11232, sessionid = 0x150a90d43a40003, negotiated timeout = 6000
2015-10-27 07:27:11,480 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,481 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54491
2015-10-27 07:27:11,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,482 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54491
2015-10-27 07:27:11,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,482 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,483 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,483 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:11,483 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,483 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:11,484 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,484 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:11,485 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000018
2015-10-27 07:27:11,485 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #24
2015-10-27 07:27:11,487 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #24 to standby state without fencing
2015-10-27 07:27:11,487 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:11,488 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,488 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #23 active...
2015-10-27 07:27:11,489 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #23 to active state
2015-10-27 07:27:11,489 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,490 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,515 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testAutoFailoverOnLostZKSession(264)) - ======= Running test cases second time to test re-establishment =========
2015-10-27 07:27:11,516 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 0's zookeeper session 94761466609270787
2015-10-27 07:27:11,516 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d43a40003
2015-10-27 07:27:11,516 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d43a40003
2015-10-27 07:27:11,517 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54491 which had sessionid 0x150a90d43a40003
2015-10-27 07:27:11,518 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d43a40003, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:11,518 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,518 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,582 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #24 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:11,582 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:11,583 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:11,618 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -4 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,619 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(440)) - Received create error from Zookeeper. code:CONNECTIONLOSS for path /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:11,619 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(444)) - Retrying createNode createRetryCount: 0
2015-10-27 07:27:11,619 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:11,619 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:27:11,969 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:12,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:12,071 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:27:12,072 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(748)) - org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
2015-10-27 07:27:12,072 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:12,105 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:12,106 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:12,106 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54493
2015-10-27 07:27:12,107 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90d43a40002 at /127.0.0.1:54493
2015-10-27 07:27:12,107 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(610)) - Invalid session 0x150a90d43a40002 for client /127.0.0.1:54493, probably expired
2015-10-27 07:27:12,107 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54493 which had sessionid 0x150a90d43a40002
2015-10-27 07:27:12,209 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d43a40002 closed
2015-10-27 07:27:12,209 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40002
2015-10-27 07:27:12,210 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40002
2015-10-27 07:27:12,210 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:12,261 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 321 more ms
2015-10-27 07:27:12,313 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 268 more ms
2015-10-27 07:27:12,365 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 217 more ms
2015-10-27 07:27:12,416 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 165 more ms
2015-10-27 07:27:12,468 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 113 more ms
2015-10-27 07:27:12,514 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:12,515 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:12,520 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 62 more ms
2015-10-27 07:27:12,571 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 10 more ms
2015-10-27 07:27:12,584 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,584 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,585 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11232 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@10f23791
2015-10-27 07:27:12,586 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:12,586 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:12,586 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54495
2015-10-27 07:27:12,587 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54495
2015-10-27 07:27:12,596 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d43a40004 with negotiated timeout 6000 for client /127.0.0.1:54495
2015-10-27 07:27:12,596 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11232, sessionid = 0x150a90d43a40004, negotiated timeout = 6000
2015-10-27 07:27:12,597 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54495
2015-10-27 07:27:12,597 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,598 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54495
2015-10-27 07:27:12,598 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:12,598 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:12,598 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:12,599 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:12,599 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:12,599 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:12,599 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,600 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:12,600 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,600 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:12,602 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000017
2015-10-27 07:27:12,602 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #23
2015-10-27 07:27:12,603 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #23 to standby state without fencing
2015-10-27 07:27:12,604 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:12,605 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,606 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #24 active...
2015-10-27 07:27:12,606 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #24 to active state
2015-10-27 07:27:12,606 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,608 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,634 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 1's zookeeper session 94761466609270788
2015-10-27 07:27:12,635 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d43a40004
2015-10-27 07:27:12,635 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d43a40004
2015-10-27 07:27:12,636 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54495 which had sessionid 0x150a90d43a40004
2015-10-27 07:27:12,637 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d43a40004, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:12,637 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,637 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,659 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #23 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:12,659 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:12,660 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:12,738 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -4 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,739 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(440)) - Received create error from Zookeeper. code:CONNECTIONLOSS for path /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:12,739 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(444)) - Retrying createNode createRetryCount: 0
2015-10-27 07:27:12,739 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:12,739 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:27:13,011 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:13,012 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:13,012 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54496
2015-10-27 07:27:13,012 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90d43a40003 at /127.0.0.1:54496
2015-10-27 07:27:13,013 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(610)) - Invalid session 0x150a90d43a40003 for client /127.0.0.1:54496, probably expired
2015-10-27 07:27:13,014 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54496 which had sessionid 0x150a90d43a40003
2015-10-27 07:27:13,101 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:27:13,115 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d43a40003 closed
2015-10-27 07:27:13,115 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40003
2015-10-27 07:27:13,115 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40003
2015-10-27 07:27:13,115 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:13,166 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 493 more ms
2015-10-27 07:27:13,218 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 441 more ms
2015-10-27 07:27:13,269 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 389 more ms
2015-10-27 07:27:13,320 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 339 more ms
2015-10-27 07:27:13,372 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 287 more ms
2015-10-27 07:27:13,423 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 236 more ms
2015-10-27 07:27:13,475 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 184 more ms
2015-10-27 07:27:13,526 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 133 more ms
2015-10-27 07:27:13,578 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 81 more ms
2015-10-27 07:27:13,617 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:13,629 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 30 more ms
2015-10-27 07:27:13,661 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,661 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,662 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11232 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@7ce28e77
2015-10-27 07:27:13,663 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:13,663 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11232, initiating session
2015-10-27 07:27:13,663 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54498
2015-10-27 07:27:13,664 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54498
2015-10-27 07:27:13,673 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d43a40005 with negotiated timeout 6000 for client /127.0.0.1:54498
2015-10-27 07:27:13,673 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11232, sessionid = 0x150a90d43a40005, negotiated timeout = 6000
2015-10-27 07:27:13,674 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,674 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,674 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,674 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,674 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,674 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,675 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,675 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,675 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,675 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54498
2015-10-27 07:27:13,675 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:13,675 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54498
2015-10-27 07:27:13,675 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,676 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:13,677 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,677 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:13,678 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000018
2015-10-27 07:27:13,678 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #24
2015-10-27 07:27:13,681 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #24 to standby state without fencing
2015-10-27 07:27:13,681 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:13,683 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,684 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #23 active...
2015-10-27 07:27:13,684 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #23 to active state
2015-10-27 07:27:13,684 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,686 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,700 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54488
2015-10-27 07:27:13,700 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54485
2015-10-27 07:27:13,705 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:13,706 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54488
2015-10-27 07:27:13,706 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:13,705 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:13,705 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54485
2015-10-27 07:27:13,707 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1469216097 appData=00000017 cb=Elector callbacks for DummyHAService #23
2015-10-27 07:27:13,706 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1236019230 appData=00000018 cb=Elector callbacks for DummyHAService #24
2015-10-27 07:27:13,706 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:13,708 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d43a40005
2015-10-27 07:27:13,709 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54498 which had sessionid 0x150a90d43a40005
2015-10-27 07:27:13,709 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d43a40005 closed
2015-10-27 07:27:13,709 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:13,709 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40005
2015-10-27 07:27:13,709 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:13,710 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 26283
2015-10-27 07:27:13,710 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 25
2015-10-27 07:27:13,710 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testAutoFailoverOnLostZKSession
2015-10-27 07:27:13,710 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:13,710 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:13,710 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:13,711 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:13,711 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:13,711 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:13,711 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:13,711 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:13,711 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:13,712 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:13,713 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11232
2015-10-27 07:27:13,715 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testAutoFailoverOnLostZKSession
2015-10-27 07:27:13,715 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testAutoFailoverOnLostZKSession
2015-10-27 07:27:13,715 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11233
2015-10-27 07:27:13,716 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testDontFailoverToUnhealthyNode
2015-10-27 07:27:13,717 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:13,717 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test2566591282064536436.junit.dir/version-2 snapdir build/test2566591282064536436.junit.dir/version-2
2015-10-27 07:27:13,717 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11233
2015-10-27 07:27:13,718 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:27:13,718 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(748)) - org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
2015-10-27 07:27:13,718 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:13,719 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11233
2015-10-27 07:27:13,720 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54500
2015-10-27 07:27:13,720 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54500
2015-10-27 07:27:13,721 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:13,721 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54500 (no session established for client)
2015-10-27 07:27:13,722 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:13,743 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testDontFailoverToUnhealthyNode
2015-10-27 07:27:13,744 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11233 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@676adb67
2015-10-27 07:27:13,745 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:13,745 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54501
2015-10-27 07:27:13,745 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11233, initiating session
2015-10-27 07:27:13,746 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54501
2015-10-27 07:27:13,746 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:13,747 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d51360000 with negotiated timeout 6000 for client /127.0.0.1:54501
2015-10-27 07:27:13,748 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11233, sessionid = 0x150a90d51360000, negotiated timeout = 6000
2015-10-27 07:27:13,748 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1380227946 appData=null cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,749 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54501
2015-10-27 07:27:13,749 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54501
2015-10-27 07:27:13,750 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:13,751 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:13,753 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:13,753 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1380227946 appData=null cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,754 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d51360000
2015-10-27 07:27:13,754 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d51360000 closed
2015-10-27 07:27:13,755 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54501 which had sessionid 0x150a90d51360000
2015-10-27 07:27:13,755 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d51360000
2015-10-27 07:27:13,755 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:13,755 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:13,756 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11233 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@79fd87c8
2015-10-27 07:27:13,756 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:13,757 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11233, initiating session
2015-10-27 07:27:13,757 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54502
2015-10-27 07:27:13,758 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54502
2015-10-27 07:27:13,759 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d51360001 with negotiated timeout 6000 for client /127.0.0.1:54502
2015-10-27 07:27:13,759 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11233, sessionid = 0x150a90d51360001, negotiated timeout = 6000
2015-10-27 07:27:13,759 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1593728237 appData=null cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,759 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1593728237 appData=null cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,760 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:13,760 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54502
2015-10-27 07:27:13,760 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54502
2015-10-27 07:27:13,761 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:13,762 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54503
2015-10-27 07:27:13,765 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:13,765 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54503: starting
2015-10-27 07:27:13,766 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:13,767 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #25 entered state: SERVICE_HEALTHY
2015-10-27 07:27:13,767 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,769 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,769 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:13,770 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:13,770 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:13,771 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,771 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #25 active...
2015-10-27 07:27:13,772 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #25 to active state
2015-10-27 07:27:13,773 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,774 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,806 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:13,808 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11233 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5be38d5
2015-10-27 07:27:13,809 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:13,809 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11233, initiating session
2015-10-27 07:27:13,809 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54504
2015-10-27 07:27:13,810 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54504
2015-10-27 07:27:13,811 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d51360002 with negotiated timeout 6000 for client /127.0.0.1:54504
2015-10-27 07:27:13,811 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11233, sessionid = 0x150a90d51360002, negotiated timeout = 6000
2015-10-27 07:27:13,812 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1906471682 appData=null cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,812 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1906471682 appData=null cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,812 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:13,812 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54504
2015-10-27 07:27:13,813 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54504
2015-10-27 07:27:13,814 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:13,815 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54505
2015-10-27 07:27:13,820 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:13,820 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:13,821 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54505: starting
2015-10-27 07:27:13,821 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #26 entered state: SERVICE_HEALTHY
2015-10-27 07:27:13,822 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1906471682 appData=0000001a cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,822 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d51360002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:13,824 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1906471682 appData=0000001a cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,824 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1906471682 appData=0000001a cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,825 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #26 should become standby
2015-10-27 07:27:13,826 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #26 to standby state
2015-10-27 07:27:13,826 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1906471682 appData=0000001a cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,827 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1906471682 appData=0000001a cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,873 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:13,873 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_UNHEALTHY
2015-10-27 07:27:13,873 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #26 entered state: SERVICE_UNHEALTHY
2015-10-27 07:27:13,874 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(766)) - Quitting master election for DummyHAService #26 and marking that fencing is necessary
2015-10-27 07:27:13,874 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:13,874 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1906471682 appData=0000001a cb=Elector callbacks for DummyHAService #26
2015-10-27 07:27:13,875 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d51360002
2015-10-27 07:27:13,877 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d51360002 closed
2015-10-27 07:27:13,877 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54504 which had sessionid 0x150a90d51360002
2015-10-27 07:27:13,877 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:13,909 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 0's zookeeper session 94761466836942849
2015-10-27 07:27:13,909 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d51360001
2015-10-27 07:27:13,909 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testDontFailoverToUnhealthyNode(294)) - Expired svc0's ZK session. Waiting a second to give svc1 a chance to take the lock, if it is ever going to.
2015-10-27 07:27:13,910 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d51360001
2015-10-27 07:27:13,910 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54502 which had sessionid 0x150a90d51360001
2015-10-27 07:27:13,911 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d51360001, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:13,911 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,911 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:13,928 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:13,980 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,011 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -4 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:14,012 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(440)) - Received create error from Zookeeper. code:CONNECTIONLOSS for path /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:14,012 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(444)) - Retrying createNode createRetryCount: 0
2015-10-27 07:27:14,012 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:14,012 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:27:14,031 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,082 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,134 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,185 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,237 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,289 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,339 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,390 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,441 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,492 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,540 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11232. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:14,544 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,595 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,641 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d43a40004 closed
2015-10-27 07:27:14,641 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:14,642 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d43a40004
2015-10-27 07:27:14,642 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:14,642 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #24 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:14,642 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:14,647 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,698 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,749 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,800 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,852 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,903 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:14,911 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testDontFailoverToUnhealthyNode(302)) - Allowing svc0's elector to re-establish its connection
2015-10-27 07:27:14,954 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:15,006 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,057 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,108 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,160 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,211 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,263 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,314 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,366 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,417 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,418 INFO  ha.ActiveStandbyElectorTestUtil (ActiveStandbyElectorTestUtil.java:waitForActiveLockData(64)) - Cur data: no node
2015-10-27 07:27:15,469 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,520 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,572 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,623 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,657 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,657 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11233, initiating session
2015-10-27 07:27:15,658 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54507
2015-10-27 07:27:15,658 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90d51360001 at /127.0.0.1:54507
2015-10-27 07:27:15,658 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(610)) - Invalid session 0x150a90d51360001 for client /127.0.0.1:54507, probably expired
2015-10-27 07:27:15,659 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54507 which had sessionid 0x150a90d51360001
2015-10-27 07:27:15,659 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1094)) - Unable to reconnect to ZooKeeper service, session 0x150a90d51360001 has expired, closing socket connection
2015-10-27 07:27:15,659 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Expired for path:null connectionState: DISCONNECTED for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,659 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(568)) - Session expired. Entering neutral mode and rejoining...
2015-10-27 07:27:15,659 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:reJoinElection(670)) - Trying to re-establish ZK session
2015-10-27 07:27:15,660 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,660 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,660 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11233 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@4c2ed6a8
2015-10-27 07:27:15,661 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11233. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,661 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11233, initiating session
2015-10-27 07:27:15,661 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54508
2015-10-27 07:27:15,662 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54508
2015-10-27 07:27:15,671 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d51360003 with negotiated timeout 6000 for client /127.0.0.1:54508
2015-10-27 07:27:15,671 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11233, sessionid = 0x150a90d51360003, negotiated timeout = 6000
2015-10-27 07:27:15,672 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,672 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54508
2015-10-27 07:27:15,672 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,673 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,672 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,673 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54508
2015-10-27 07:27:15,674 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,675 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,675 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:15,676 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000019
2015-10-27 07:27:15,676 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(900)) - But old node has our own data, so don't need to fence it.
2015-10-27 07:27:15,676 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:15,678 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,678 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #25 active...
2015-10-27 07:27:15,679 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #25 to active state
2015-10-27 07:27:15,691 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,693 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,722 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54503
2015-10-27 07:27:15,722 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54505
2015-10-27 07:27:15,727 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #26: not healthy
2015-10-27 07:27:15,727 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:15,727 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:15,727 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:15,727 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54503
2015-10-27 07:27:15,727 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54505
2015-10-27 07:27:15,727 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:15,727 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:15,730 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1593728237 appData=00000019 cb=Elector callbacks for DummyHAService #25
2015-10-27 07:27:15,730 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d51360003
2015-10-27 07:27:15,731 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54508 which had sessionid 0x150a90d51360003
2015-10-27 07:27:15,732 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d51360003 closed
2015-10-27 07:27:15,732 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:15,732 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d51360003
2015-10-27 07:27:15,732 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,733 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 5076
2015-10-27 07:27:15,733 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 20
2015-10-27 07:27:15,733 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testDontFailoverToUnhealthyNode
2015-10-27 07:27:15,733 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:15,733 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:15,734 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:15,734 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:15,734 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:15,734 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:15,734 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:15,734 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:15,735 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:15,735 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:15,736 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11233
2015-10-27 07:27:15,737 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testDontFailoverToUnhealthyNode
2015-10-27 07:27:15,737 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testDontFailoverToUnhealthyNode
2015-10-27 07:27:15,737 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11234
2015-10-27 07:27:15,738 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testGracefulFailoverFailBecomingStandby
2015-10-27 07:27:15,738 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:15,739 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test441041464664338861.junit.dir/version-2 snapdir build/test441041464664338861.junit.dir/version-2
2015-10-27 07:27:15,739 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11234
2015-10-27 07:27:15,741 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11234
2015-10-27 07:27:15,741 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54510
2015-10-27 07:27:15,742 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54510
2015-10-27 07:27:15,742 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:15,743 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54510 (no session established for client)
2015-10-27 07:27:15,743 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:15,760 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d51360001
2015-10-27 07:27:15,766 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testGracefulFailoverFailBecomingStandby
2015-10-27 07:27:15,767 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11234 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5c533a2
2015-10-27 07:27:15,768 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,769 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11234, initiating session
2015-10-27 07:27:15,769 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54511
2015-10-27 07:27:15,770 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54511
2015-10-27 07:27:15,771 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:15,772 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d591c0000 with negotiated timeout 6000 for client /127.0.0.1:54511
2015-10-27 07:27:15,773 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11234, sessionid = 0x150a90d591c0000, negotiated timeout = 6000
2015-10-27 07:27:15,773 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=701019800 appData=null cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,774 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54511
2015-10-27 07:27:15,774 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54511
2015-10-27 07:27:15,775 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:15,777 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:15,779 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:15,779 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=701019800 appData=null cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,779 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d591c0000
2015-10-27 07:27:15,780 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54511 which had sessionid 0x150a90d591c0000
2015-10-27 07:27:15,780 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d591c0000 closed
2015-10-27 07:27:15,781 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:15,781 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d591c0000
2015-10-27 07:27:15,781 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,782 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11234 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@7ca7700a
2015-10-27 07:27:15,782 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,783 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11234, initiating session
2015-10-27 07:27:15,783 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54512
2015-10-27 07:27:15,784 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54512
2015-10-27 07:27:15,785 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d591c0001 with negotiated timeout 6000 for client /127.0.0.1:54512
2015-10-27 07:27:15,785 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11234, sessionid = 0x150a90d591c0001, negotiated timeout = 6000
2015-10-27 07:27:15,786 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2097692643 appData=null cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,786 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54512
2015-10-27 07:27:15,786 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2097692643 appData=null cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,786 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54512
2015-10-27 07:27:15,786 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,788 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:15,789 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54513
2015-10-27 07:27:15,792 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:15,792 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54513: starting
2015-10-27 07:27:15,794 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:15,794 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #27 entered state: SERVICE_HEALTHY
2015-10-27 07:27:15,795 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,797 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,797 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:15,798 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:15,798 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:15,799 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,799 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #27 active...
2015-10-27 07:27:15,800 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #27 to active state
2015-10-27 07:27:15,801 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,802 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,832 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:15,833 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11234 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@6277252c
2015-10-27 07:27:15,834 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,834 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11234, initiating session
2015-10-27 07:27:15,834 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54514
2015-10-27 07:27:15,835 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54514
2015-10-27 07:27:15,836 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d591c0002 with negotiated timeout 6000 for client /127.0.0.1:54514
2015-10-27 07:27:15,836 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11234, sessionid = 0x150a90d591c0002, negotiated timeout = 6000
2015-10-27 07:27:15,837 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2024336905 appData=null cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,837 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2024336905 appData=null cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,837 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,837 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54514
2015-10-27 07:27:15,838 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54514
2015-10-27 07:27:15,839 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:15,839 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54515
2015-10-27 07:27:15,842 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:15,843 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54515: starting
2015-10-27 07:27:15,844 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:15,845 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #28 entered state: SERVICE_HEALTHY
2015-10-27 07:27:15,845 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,846 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d591c0002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:15,847 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,847 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,848 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #28 should become standby
2015-10-27 07:27:15,849 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #28 to standby state
2015-10-27 07:27:15,849 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,851 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,884 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(650)) - Asking DummyHAService #27 to cede its active state for 10000ms
2015-10-27 07:27:15,885 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:27:15,886 WARN  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(577)) - Unable to transition local node to standby: injected failure
2015-10-27 07:27:15,887 WARN  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(579)) - Quitting election but indicating that fencing is necessary
2015-10-27 07:27:15,887 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:15,887 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,888 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d591c0001
2015-10-27 07:27:15,890 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,890 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d591c0001 closed
2015-10-27 07:27:15,890 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 9996 more ms
2015-10-27 07:27:15,891 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d591c0001, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:27:15,891 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d591c0001
2015-10-27 07:27:15,892 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54512 which had sessionid 0x150a90d591c0001
2015-10-27 07:27:15,892 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,892 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,892 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:15,893 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 0000001b
2015-10-27 07:27:15,893 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #27
2015-10-27 07:27:15,894 WARN  ha.FailoverController (FailoverController.java:tryGracefulFence(175)) - Unable to gracefully make DummyHAService #27 standby (injected failure)
2015-10-27 07:27:15,894 INFO  ha.NodeFencer (NodeFencer.java:fence(91)) - ====== Beginning Service Fencing Process... ======
2015-10-27 07:27:15,895 INFO  ha.NodeFencer (NodeFencer.java:fence(94)) - Trying method 1/1: org.apache.hadoop.ha.DummyHAService.DummyFencer(null)
2015-10-27 07:27:15,895 INFO  ha.DummyHAService (DummyHAService.java:tryFence(196)) - tryFence(DummyHAService #27)
2015-10-27 07:27:15,895 INFO  ha.NodeFencer (NodeFencer.java:fence(98)) - ====== Fencing successful by method org.apache.hadoop.ha.DummyHAService.DummyFencer(null) ======
2015-10-27 07:27:15,895 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:15,897 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,897 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #28 active...
2015-10-27 07:27:15,897 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #28 to active state
2015-10-27 07:27:15,898 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,898 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,898 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,899 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11234 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@28b6f947
2015-10-27 07:27:15,899 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,900 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11234. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,900 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11234, initiating session
2015-10-27 07:27:15,901 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54516
2015-10-27 07:27:15,901 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54516
2015-10-27 07:27:15,902 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d591c0003 with negotiated timeout 6000 for client /127.0.0.1:54516
2015-10-27 07:27:15,902 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11234, sessionid = 0x150a90d591c0003, negotiated timeout = 6000
2015-10-27 07:27:15,903 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,903 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(679)) - Successfully became active. Successfully transitioned DummyHAService #28 to active state
2015-10-27 07:27:15,903 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,903 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,904 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54513
2015-10-27 07:27:15,904 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54515
2015-10-27 07:27:15,907 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:15,907 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:15,907 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:15,908 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2024336905 appData=0000001c cb=Elector callbacks for DummyHAService #28
2015-10-27 07:27:15,908 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54515
2015-10-27 07:27:15,907 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:15,908 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54513
2015-10-27 07:27:15,908 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2097692643 appData=0000001b cb=Elector callbacks for DummyHAService #27
2015-10-27 07:27:15,909 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54516
2015-10-27 07:27:15,909 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54516
2015-10-27 07:27:15,910 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d591c0003 type:create cxid:0x1 zxid:0xe txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:15,910 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d591c0002
2015-10-27 07:27:15,910 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d591c0003
2015-10-27 07:27:15,911 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d591c0002 closed
2015-10-27 07:27:15,911 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:15,911 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d591c0002
2015-10-27 07:27:15,912 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,912 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d591c0002, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:27:15,912 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d591c0003 closed
2015-10-27 07:27:15,913 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:15,913 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d591c0003
2015-10-27 07:27:15,913 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,913 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 14518
2015-10-27 07:27:15,913 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 23
2015-10-27 07:27:15,913 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testGracefulFailoverFailBecomingStandby
2015-10-27 07:27:15,913 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54514 which had sessionid 0x150a90d591c0002
2015-10-27 07:27:15,913 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:15,914 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:15,914 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d591c0003, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:27:15,914 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54516 which had sessionid 0x150a90d591c0003
2015-10-27 07:27:15,914 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:15,915 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:15,915 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:15,915 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:15,915 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:15,915 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:15,916 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:15,916 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:15,917 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11234
2015-10-27 07:27:15,918 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testGracefulFailoverFailBecomingStandby
2015-10-27 07:27:15,918 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testGracefulFailoverFailBecomingStandby
2015-10-27 07:27:15,919 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11235
2015-10-27 07:27:15,920 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testFormatZK
2015-10-27 07:27:15,920 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:15,921 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test7130299229192294774.junit.dir/version-2 snapdir build/test7130299229192294774.junit.dir/version-2
2015-10-27 07:27:15,922 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11235
2015-10-27 07:27:15,927 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11235
2015-10-27 07:27:15,928 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54518
2015-10-27 07:27:15,929 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54518
2015-10-27 07:27:15,929 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:15,930 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54518 (no session established for client)
2015-10-27 07:27:15,930 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:15,963 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testFormatZK
2015-10-27 07:27:15,964 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11235 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@692f95ad
2015-10-27 07:27:15,964 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11235. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,965 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11235, initiating session
2015-10-27 07:27:15,965 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54519
2015-10-27 07:27:15,966 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54519
2015-10-27 07:27:15,966 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:15,967 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d59d30000 with negotiated timeout 6000 for client /127.0.0.1:54519
2015-10-27 07:27:15,967 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11235, sessionid = 0x150a90d59d30000, negotiated timeout = 6000
2015-10-27 07:27:15,968 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1465147287 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,968 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1465147287 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,968 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,968 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54519
2015-10-27 07:27:15,969 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54519
2015-10-27 07:27:15,970 FATAL ha.ZKFailoverController (ZKFailoverController.java:doRun(217)) - Unable to start failover controller. Parent znode does not exist.
Run with -formatZK flag to initialize ZooKeeper.
2015-10-27 07:27:15,970 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1465147287 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,970 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d59d30000
2015-10-27 07:27:15,971 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d59d30000 closed
2015-10-27 07:27:15,971 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,972 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54519 which had sessionid 0x150a90d59d30000
2015-10-27 07:27:15,972 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11235 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@78fb787f
2015-10-27 07:27:15,973 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11235. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,974 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11235, initiating session
2015-10-27 07:27:15,974 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54520
2015-10-27 07:27:15,974 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54520
2015-10-27 07:27:15,975 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d59d30001 with negotiated timeout 6000 for client /127.0.0.1:54520
2015-10-27 07:27:15,976 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11235, sessionid = 0x150a90d59d30001, negotiated timeout = 6000
2015-10-27 07:27:15,976 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=2099942139 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,976 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=2099942139 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,976 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54520
2015-10-27 07:27:15,976 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,976 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54520
2015-10-27 07:27:15,977 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:15,979 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:15,981 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:15,981 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=2099942139 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,982 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d59d30001
2015-10-27 07:27:15,982 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d59d30001 closed
2015-10-27 07:27:15,983 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54520 which had sessionid 0x150a90d59d30001
2015-10-27 07:27:15,983 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,983 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11235 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@abf35e1
2015-10-27 07:27:15,984 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11235. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,984 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11235, initiating session
2015-10-27 07:27:15,984 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54521
2015-10-27 07:27:15,985 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54521
2015-10-27 07:27:15,986 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d59d30002 with negotiated timeout 6000 for client /127.0.0.1:54521
2015-10-27 07:27:15,986 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11235, sessionid = 0x150a90d59d30002, negotiated timeout = 6000
2015-10-27 07:27:15,986 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=536522213 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,987 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=536522213 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,987 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54521
2015-10-27 07:27:15,987 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,987 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54521
2015-10-27 07:27:15,988 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=536522213 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,988 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d59d30002
2015-10-27 07:27:15,989 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d59d30002 closed
2015-10-27 07:27:15,989 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:15,990 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11235 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@4f30291c
2015-10-27 07:27:15,989 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54521 which had sessionid 0x150a90d59d30002
2015-10-27 07:27:15,990 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11235. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:15,991 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11235, initiating session
2015-10-27 07:27:15,991 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54522
2015-10-27 07:27:15,991 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54522
2015-10-27 07:27:15,992 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d59d30003 with negotiated timeout 6000 for client /127.0.0.1:54522
2015-10-27 07:27:15,993 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11235, sessionid = 0x150a90d59d30003, negotiated timeout = 6000
2015-10-27 07:27:15,993 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=533164811 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,993 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=533164811 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:15,993 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54522
2015-10-27 07:27:15,993 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:15,994 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54522
2015-10-27 07:27:15,994 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:clearParentZNode(323)) - Recursively deleting /hadoop-ha/dummy-cluster from ZK...
2015-10-27 07:27:16,001 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:clearParentZNode(336)) - Successfully deleted /hadoop-ha/dummy-cluster from ZK.
2015-10-27 07:27:16,001 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:16,004 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d59d30003 type:create cxid:0x4 zxid:0xb txntype:-1 reqpath:n/a Error Path:/hadoop-ha Error:KeeperErrorCode = NodeExists for /hadoop-ha
2015-10-27 07:27:16,005 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:16,007 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:16,007 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=533164811 appData=null cb=Elector callbacks for DummyHAService #30
2015-10-27 07:27:16,008 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d59d30003
2015-10-27 07:27:16,008 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d59d30003 closed
2015-10-27 07:27:16,008 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 20958
2015-10-27 07:27:16,008 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 28
2015-10-27 07:27:16,009 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testFormatZK
2015-10-27 07:27:16,008 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54522 which had sessionid 0x150a90d59d30003
2015-10-27 07:27:16,009 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:16,008 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:16,009 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:16,010 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:16,010 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:16,010 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:16,011 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:16,011 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:16,011 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:16,011 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:16,011 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:16,012 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11235
2015-10-27 07:27:16,014 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testFormatZK
2015-10-27 07:27:16,014 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testFormatZK
2015-10-27 07:27:16,015 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11236
2015-10-27 07:27:16,015 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testOneOfEverything
2015-10-27 07:27:16,016 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:16,017 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test2193526385814968699.junit.dir/version-2 snapdir build/test2193526385814968699.junit.dir/version-2
2015-10-27 07:27:16,017 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11236
2015-10-27 07:27:16,019 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11236
2015-10-27 07:27:16,020 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54524
2015-10-27 07:27:16,020 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54524
2015-10-27 07:27:16,021 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:16,021 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54524 (no session established for client)
2015-10-27 07:27:16,022 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:16,046 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testOneOfEverything
2015-10-27 07:27:16,047 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@56177ce3
2015-10-27 07:27:16,048 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:16,048 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:16,048 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54525
2015-10-27 07:27:16,049 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54525
2015-10-27 07:27:16,049 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:16,051 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5a320000 with negotiated timeout 6000 for client /127.0.0.1:54525
2015-10-27 07:27:16,051 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5a320000, negotiated timeout = 6000
2015-10-27 07:27:16,051 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1611117746 appData=null cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,051 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1611117746 appData=null cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,052 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:16,052 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54525
2015-10-27 07:27:16,052 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54525
2015-10-27 07:27:16,053 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:16,054 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:16,056 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:16,056 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1611117746 appData=null cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,057 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5a320000
2015-10-27 07:27:16,058 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5a320000 closed
2015-10-27 07:27:16,058 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54525 which had sessionid 0x150a90d5a320000
2015-10-27 07:27:16,058 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:16,058 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:16,059 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@1e629814
2015-10-27 07:27:16,059 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:16,060 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:16,060 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54526
2015-10-27 07:27:16,061 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54526
2015-10-27 07:27:16,062 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5a320001 with negotiated timeout 6000 for client /127.0.0.1:54526
2015-10-27 07:27:16,062 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5a320001, negotiated timeout = 6000
2015-10-27 07:27:16,062 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=895054286 appData=null cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,062 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54526
2015-10-27 07:27:16,063 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54526
2015-10-27 07:27:16,063 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=895054286 appData=null cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,064 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:16,064 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:16,065 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54527
2015-10-27 07:27:16,068 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:16,068 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54527: starting
2015-10-27 07:27:16,070 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:16,070 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #31 entered state: SERVICE_HEALTHY
2015-10-27 07:27:16,071 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,072 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,073 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:16,073 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:16,073 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:16,075 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,075 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #31 active...
2015-10-27 07:27:16,076 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #31 to active state
2015-10-27 07:27:16,076 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,078 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,109 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:16,110 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@61de46fe
2015-10-27 07:27:16,111 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:16,112 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:16,112 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54528
2015-10-27 07:27:16,112 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54528
2015-10-27 07:27:16,113 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5a320002 with negotiated timeout 6000 for client /127.0.0.1:54528
2015-10-27 07:27:16,114 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5a320002, negotiated timeout = 6000
2015-10-27 07:27:16,114 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1361666171 appData=null cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,114 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1361666171 appData=null cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,114 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54528
2015-10-27 07:27:16,115 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:16,115 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54528
2015-10-27 07:27:16,116 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:16,117 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54529
2015-10-27 07:27:16,122 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:16,122 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54529: starting
2015-10-27 07:27:16,123 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:16,124 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #32 entered state: SERVICE_HEALTHY
2015-10-27 07:27:16,124 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,125 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d5a320002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:16,126 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,127 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,127 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #32 should become standby
2015-10-27 07:27:16,131 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #32 to standby state
2015-10-27 07:27:16,132 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,134 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,161 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testOneOfEverything(577)) - ====== Failing over by session expiration
2015-10-27 07:27:16,161 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 0's zookeeper session 94761466987675649
2015-10-27 07:27:16,161 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d5a320001
2015-10-27 07:27:16,162 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5a320001
2015-10-27 07:27:16,163 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54526 which had sessionid 0x150a90d5a320001
2015-10-27 07:27:16,164 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,164 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,164 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,164 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d5a320001, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:16,166 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,166 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:16,168 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 0000001f
2015-10-27 07:27:16,168 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #31
2015-10-27 07:27:16,170 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #31 to standby state without fencing
2015-10-27 07:27:16,170 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:16,172 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,173 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #32 active...
2015-10-27 07:27:16,173 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #32 to active state
2015-10-27 07:27:16,173 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,175 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,213 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:expireActiveLockHolder(204)) - Expiring svc 1's zookeeper session 94761466987675650
2015-10-27 07:27:16,213 INFO  server.ZooKeeperServer (ZooKeeperServer.java:closeSession(326)) - Closing session 0x150a90d5a320002
2015-10-27 07:27:16,213 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5a320002
2015-10-27 07:27:16,218 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54528 which had sessionid 0x150a90d5a320002
2015-10-27 07:27:16,219 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d5a320002, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:16,219 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,219 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:enterNeutralMode(917)) - Entering neutral mode for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,224 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #31 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:16,224 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:16,224 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:16,265 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5a320001 closed
2015-10-27 07:27:16,266 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5a320001
2015-10-27 07:27:16,266 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5a320001
2015-10-27 07:27:16,266 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:16,317 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 906 more ms
2015-10-27 07:27:16,319 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -4 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,320 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(440)) - Received create error from Zookeeper. code:CONNECTIONLOSS for path /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:16,320 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(444)) - Retrying createNode createRetryCount: 0
2015-10-27 07:27:16,320 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:Disconnected for path:null connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:16,320 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(558)) - Session disconnected. Entering neutral mode...
2015-10-27 07:27:16,370 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 854 more ms
2015-10-27 07:27:16,421 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 802 more ms
2015-10-27 07:27:16,474 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 750 more ms
2015-10-27 07:27:16,525 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 698 more ms
2015-10-27 07:27:16,577 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 646 more ms
2015-10-27 07:27:16,629 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 595 more ms
2015-10-27 07:27:16,680 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 543 more ms
2015-10-27 07:27:16,731 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 492 more ms
2015-10-27 07:27:16,782 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 441 more ms
2015-10-27 07:27:16,833 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 390 more ms
2015-10-27 07:27:16,885 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 339 more ms
2015-10-27 07:27:16,936 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 287 more ms
2015-10-27 07:27:16,987 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 236 more ms
2015-10-27 07:27:17,039 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 184 more ms
2015-10-27 07:27:17,074 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=2038162121 appData=00000001 cb=Elector callbacks for DummyHAService #1
2015-10-27 07:27:17,075 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11221 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@113db302
2015-10-27 07:27:17,076 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:17,077 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:17,090 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 133 more ms
2015-10-27 07:27:17,142 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 81 more ms
2015-10-27 07:27:17,193 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 31 more ms
2015-10-27 07:27:17,226 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,226 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,226 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@30dcce73
2015-10-27 07:27:17,227 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:17,228 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:17,228 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54531
2015-10-27 07:27:17,229 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54531
2015-10-27 07:27:17,238 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5a320003 with negotiated timeout 6000 for client /127.0.0.1:54531
2015-10-27 07:27:17,238 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5a320003, negotiated timeout = 6000
2015-10-27 07:27:17,239 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,239 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,239 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,239 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54531
2015-10-27 07:27:17,239 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,240 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,240 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,240 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,240 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54531
2015-10-27 07:27:17,240 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,241 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,241 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,241 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:17,241 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,242 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,242 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,242 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,242 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:17,243 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000020
2015-10-27 07:27:17,243 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #32
2015-10-27 07:27:17,245 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #32 to standby state without fencing
2015-10-27 07:27:17,245 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:17,247 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,247 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #31 active...
2015-10-27 07:27:17,247 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #31 to active state
2015-10-27 07:27:17,247 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,248 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,248 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,248 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,248 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,249 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,249 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:17,249 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,280 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testOneOfEverything(582)) - ====== Restarting server
2015-10-27 07:27:17,280 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:17,281 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54531 which had sessionid 0x150a90d5a320003
2015-10-27 07:27:17,281 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:17,281 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(1098)) - Unable to read additional data from server sessionid 0x150a90d5a320003, likely server has closed socket, closing socket connection and attempting reconnect
2015-10-27 07:27:17,282 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:17,282 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:17,282 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:17,282 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:17,282 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:17,283 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:17,283 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:17,284 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11236
2015-10-27 07:27:17,285 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11236
2015-10-27 07:27:17,285 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:17,286 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test2193526385814968699.junit.dir/version-2 snapdir build/test2193526385814968699.junit.dir/version-2
2015-10-27 07:27:17,286 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11236
2015-10-27 07:27:17,292 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11236
2015-10-27 07:27:17,293 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54534
2015-10-27 07:27:17,293 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54534
2015-10-27 07:27:17,294 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:17,295 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54534 (no session established for client)
2015-10-27 07:27:17,295 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11236
2015-10-27 07:27:17,297 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54535
2015-10-27 07:27:17,297 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54535
2015-10-27 07:27:17,297 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:17,298 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54535 (no session established for client)
2015-10-27 07:27:17,299 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,299 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_UNHEALTHY
2015-10-27 07:27:17,299 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #31 entered state: SERVICE_UNHEALTHY
2015-10-27 07:27:17,299 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(766)) - Quitting master election for DummyHAService #31 and marking that fencing is necessary
2015-10-27 07:27:17,299 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:17,300 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:17,303 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #32 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:17,303 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:17,304 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:17,383 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5a320003 closed
2015-10-27 07:27:17,384 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5a320003
2015-10-27 07:27:17,384 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:17,435 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,486 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,536 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:17,536 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:17,536 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54536
2015-10-27 07:27:17,537 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,537 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(861)) - Client attempting to renew session 0x150a90d5a320002 at /127.0.0.1:54536
2015-10-27 07:27:17,537 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(610)) - Invalid session 0x150a90d5a320002 for client /127.0.0.1:54536, probably expired
2015-10-27 07:27:17,537 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54536 which had sessionid 0x150a90d5a320002
2015-10-27 07:27:17,588 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,638 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5a320002 closed
2015-10-27 07:27:17,638 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5a320002
2015-10-27 07:27:17,639 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5a320002
2015-10-27 07:27:17,639 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:17,640 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,689 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 614 more ms
2015-10-27 07:27:17,691 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,741 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 562 more ms
2015-10-27 07:27:17,743 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,793 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 510 more ms
2015-10-27 07:27:17,795 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,845 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 458 more ms
2015-10-27 07:27:17,846 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,897 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 406 more ms
2015-10-27 07:27:17,897 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:17,949 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 354 more ms
2015-10-27 07:27:17,949 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,001 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:18,001 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 302 more ms
2015-10-27 07:27:18,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:18,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:18,001 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:run(162)) - SessionTrackerImpl exited loop!
2015-10-27 07:27:18,052 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 250 more ms
2015-10-27 07:27:18,052 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,104 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 199 more ms
2015-10-27 07:27:18,104 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,156 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 147 more ms
2015-10-27 07:27:18,156 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,178 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:18,179 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:18,207 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 95 more ms
2015-10-27 07:27:18,207 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,259 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 44 more ms
2015-10-27 07:27:18,259 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,305 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,305 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,305 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@86b66eb
2015-10-27 07:27:18,306 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:18,307 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:18,307 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54538
2015-10-27 07:27:18,307 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54538
2015-10-27 07:27:18,308 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.11
2015-10-27 07:27:18,311 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,317 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5f2b0000 with negotiated timeout 6000 for client /127.0.0.1:54538
2015-10-27 07:27:18,317 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5f2b0000, negotiated timeout = 6000
2015-10-27 07:27:18,318 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,318 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54538
2015-10-27 07:27:18,318 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,318 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54538
2015-10-27 07:27:18,319 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,319 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,320 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,320 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,320 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,320 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,321 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,321 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,321 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,321 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(252)) - Already in election. Not re-connecting.
2015-10-27 07:27:18,320 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d5f2b0000 type:create cxid:0x1 zxid:0x12 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:18,321 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,322 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:18,322 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,323 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,323 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #32 should become standby
2015-10-27 07:27:18,323 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #32 to standby state
2015-10-27 07:27:18,324 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,325 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:18,362 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,413 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,465 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,517 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,567 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,619 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,670 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,720 FATAL ha.ActiveStandbyElector (ActiveStandbyElector.java:fatalError(642)) - Failed to reEstablish connection with ZooKeeper
2015-10-27 07:27:18,720 FATAL ha.ZKFailoverController (ZKFailoverController.java:fatalError(372)) - Fatal error occurred:Failed to reEstablish connection with ZooKeeper
2015-10-27 07:27:18,720 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:18,720 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:18,721 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:18,721 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,773 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,824 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,875 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,926 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:18,977 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,028 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,079 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,131 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,183 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,234 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,282 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:19,282 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:19,285 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,337 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,389 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,462 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,513 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,564 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,616 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,667 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,719 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,770 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,822 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,873 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,924 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:19,975 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,027 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,079 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,130 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,181 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,232 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,283 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,335 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,384 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:20,385 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:20,386 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,437 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,489 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,539 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,591 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,642 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,694 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,745 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,797 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,848 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,900 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:20,951 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,002 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,053 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,104 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,156 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,207 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,259 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,310 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,362 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,413 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,464 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,487 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:21,488 WARN  zookeeper.ClientCnxn (ClientCnxn.java:run(1102)) - Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:739)
	at org.apache.zookeeper.ClientCnxnSocketNIO.doTransport(ClientCnxnSocketNIO.java:361)
	at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1081)
2015-10-27 07:27:21,515 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,567 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,619 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,670 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,722 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,773 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,825 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,877 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,928 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:21,980 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,031 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,077 ERROR ha.ActiveStandbyElector (ActiveStandbyElector.java:waitForZKConnectionEvent(1044)) - Connection timed out: couldn't connect to ZooKeeper in 5000 milliseconds
2015-10-27 07:27:22,081 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,133 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,183 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,235 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,286 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,338 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,390 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,441 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,492 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,543 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,590 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11221. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:22,595 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,646 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,691 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x0 closed
2015-10-27 07:27:22,691 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(748)) - org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss
2015-10-27 07:27:22,691 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:22,698 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,749 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,801 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,852 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,903 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:22,955 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,006 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,058 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,109 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,161 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,211 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,263 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,314 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,366 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,417 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,468 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,520 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,571 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,623 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,674 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,725 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,777 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,828 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,879 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,931 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:23,982 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:24,001 INFO  server.ZooKeeperServer (ZooKeeperServer.java:expire(347)) - Expiring session 0x150a90d5a320003, timeout of 6000ms exceeded
2015-10-27 07:27:24,001 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5a320003
2015-10-27 07:27:24,010 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,012 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,012 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,013 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 0000001f
2015-10-27 07:27:24,013 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #31
2015-10-27 07:27:24,014 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #31 to standby state without fencing
2015-10-27 07:27:24,014 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,016 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,016 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #32 active...
2015-10-27 07:27:24,016 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #32 to active state
2015-10-27 07:27:24,016 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,017 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,033 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #31: not healthy
2015-10-27 07:27:24,084 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,085 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #31 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,085 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,085 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,086 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@412b940e
2015-10-27 07:27:24,087 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,087 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:24,087 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54543
2015-10-27 07:27:24,088 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54543
2015-10-27 07:27:24,089 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5f2b0001 with negotiated timeout 6000 for client /127.0.0.1:54543
2015-10-27 07:27:24,089 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5f2b0001, negotiated timeout = 6000
2015-10-27 07:27:24,090 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,090 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54543
2015-10-27 07:27:24,090 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54543
2015-10-27 07:27:24,090 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,091 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,091 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d5f2b0001 type:create cxid:0x1 zxid:0x17 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:24,092 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,092 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,092 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #31 should become standby
2015-10-27 07:27:24,093 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #31 to standby state
2015-10-27 07:27:24,094 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,095 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,104 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(644)) - Local node DummyHAService #32 is already active. No need to failover. Returning success.
2015-10-27 07:27:24,105 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(650)) - Asking DummyHAService #32 to cede its active state for 10000ms
2015-10-27 07:27:24,106 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:27:24,107 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(575)) - Successfully ensured local node is in standby mode
2015-10-27 07:27:24,107 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,108 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:tryDeleteOwnBreadCrumbNode(844)) - Deleting bread-crumb of active node...
2015-10-27 07:27:24,110 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,110 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5f2b0000
2015-10-27 07:27:24,111 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54538 which had sessionid 0x150a90d5f2b0000
2015-10-27 07:27:24,112 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5f2b0000 closed
2015-10-27 07:27:24,112 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 9995 more ms
2015-10-27 07:27:24,111 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,112 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5f2b0000
2015-10-27 07:27:24,112 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,114 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,114 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,115 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:24,115 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,117 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,117 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #31 active...
2015-10-27 07:27:24,118 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #31 to active state
2015-10-27 07:27:24,118 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,118 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,119 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,119 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11236 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@235486b
2015-10-27 07:27:24,119 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,120 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11236. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,120 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11236, initiating session
2015-10-27 07:27:24,120 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54544
2015-10-27 07:27:24,121 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54544
2015-10-27 07:27:24,122 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d5f2b0002 with negotiated timeout 6000 for client /127.0.0.1:54544
2015-10-27 07:27:24,122 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11236, sessionid = 0x150a90d5f2b0002, negotiated timeout = 6000
2015-10-27 07:27:24,122 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,123 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(679)) - Successfully became active. Successfully transitioned DummyHAService #31 to active state
2015-10-27 07:27:24,123 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54544
2015-10-27 07:27:24,123 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,123 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,123 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54529
2015-10-27 07:27:24,123 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54527
2015-10-27 07:27:24,123 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54544
2015-10-27 07:27:24,125 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54529
2015-10-27 07:27:24,125 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,125 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,126 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d5f2b0002 type:create cxid:0x1 zxid:0x1d txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:24,127 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1361666171 appData=00000020 cb=Elector callbacks for DummyHAService #32
2015-10-27 07:27:24,124 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,128 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=895054286 appData=0000001f cb=Elector callbacks for DummyHAService #31
2015-10-27 07:27:24,125 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54527
2015-10-27 07:27:24,125 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,128 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5f2b0002
2015-10-27 07:27:24,129 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d5f2b0001
2015-10-27 07:27:24,129 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54544 which had sessionid 0x150a90d5f2b0002
2015-10-27 07:27:24,130 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5f2b0002 closed
2015-10-27 07:27:24,130 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,130 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d5f2b0001 closed
2015-10-27 07:27:24,130 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,131 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5f2b0002
2015-10-27 07:27:24,131 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,130 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54543 which had sessionid 0x150a90d5f2b0001
2015-10-27 07:27:24,131 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d5f2b0001
2015-10-27 07:27:24,131 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,132 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 12161
2015-10-27 07:27:24,132 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 21
2015-10-27 07:27:24,132 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testOneOfEverything
2015-10-27 07:27:24,132 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:24,133 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:24,133 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:24,133 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:24,133 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:24,133 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:24,134 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:24,134 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:24,134 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:24,134 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:24,135 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11236
2015-10-27 07:27:24,137 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testOneOfEverything
2015-10-27 07:27:24,137 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testOneOfEverything
2015-10-27 07:27:24,138 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11237
2015-10-27 07:27:24,138 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testGracefulFailoverToUnhealthy
2015-10-27 07:27:24,139 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:24,140 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test3392700336668071438.junit.dir/version-2 snapdir build/test3392700336668071438.junit.dir/version-2
2015-10-27 07:27:24,140 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11237
2015-10-27 07:27:24,141 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11237
2015-10-27 07:27:24,142 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54546
2015-10-27 07:27:24,143 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54546
2015-10-27 07:27:24,143 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:24,144 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54546 (no session established for client)
2015-10-27 07:27:24,144 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:24,166 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testGracefulFailoverToUnhealthy
2015-10-27 07:27:24,166 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11237 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@577e923
2015-10-27 07:27:24,167 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,168 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11237, initiating session
2015-10-27 07:27:24,168 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54547
2015-10-27 07:27:24,168 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54547
2015-10-27 07:27:24,169 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:24,170 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d79ed0000 with negotiated timeout 6000 for client /127.0.0.1:54547
2015-10-27 07:27:24,170 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11237, sessionid = 0x150a90d79ed0000, negotiated timeout = 6000
2015-10-27 07:27:24,170 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=69166454 appData=null cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,171 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54547
2015-10-27 07:27:24,171 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54547
2015-10-27 07:27:24,172 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:24,173 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:24,175 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:24,175 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=69166454 appData=null cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,176 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d79ed0000
2015-10-27 07:27:24,177 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d79ed0000 closed
2015-10-27 07:27:24,177 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54547 which had sessionid 0x150a90d79ed0000
2015-10-27 07:27:24,177 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:24,177 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d79ed0000
2015-10-27 07:27:24,177 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,177 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11237 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@2444b625
2015-10-27 07:27:24,178 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,179 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11237, initiating session
2015-10-27 07:27:24,179 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54548
2015-10-27 07:27:24,180 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54548
2015-10-27 07:27:24,181 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d79ed0001 with negotiated timeout 6000 for client /127.0.0.1:54548
2015-10-27 07:27:24,181 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11237, sessionid = 0x150a90d79ed0001, negotiated timeout = 6000
2015-10-27 07:27:24,181 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1548490201 appData=null cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,181 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,182 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1548490201 appData=null cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,182 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54548
2015-10-27 07:27:24,182 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54548
2015-10-27 07:27:24,183 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:24,184 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54549
2015-10-27 07:27:24,188 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:24,188 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54549: starting
2015-10-27 07:27:24,189 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,190 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #33 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,191 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1548490201 appData=00000021 cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,193 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1548490201 appData=00000021 cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,193 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,194 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:24,194 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,196 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1548490201 appData=00000021 cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,196 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #33 active...
2015-10-27 07:27:24,197 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #33 to active state
2015-10-27 07:27:24,197 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1548490201 appData=00000021 cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,198 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1548490201 appData=00000021 cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,228 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:24,228 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11237 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@d4fa48a
2015-10-27 07:27:24,229 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11237. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,230 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11237, initiating session
2015-10-27 07:27:24,230 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54550
2015-10-27 07:27:24,230 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54550
2015-10-27 07:27:24,231 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d79ed0002 with negotiated timeout 6000 for client /127.0.0.1:54550
2015-10-27 07:27:24,232 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11237, sessionid = 0x150a90d79ed0002, negotiated timeout = 6000
2015-10-27 07:27:24,232 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=789983943 appData=null cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,232 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54550
2015-10-27 07:27:24,233 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54550
2015-10-27 07:27:24,233 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=789983943 appData=null cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,234 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,234 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:24,234 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54551
2015-10-27 07:27:24,237 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:24,238 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54551: starting
2015-10-27 07:27:24,239 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,239 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #34 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,240 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=789983943 appData=00000022 cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,240 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d79ed0002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:24,241 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=789983943 appData=00000022 cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,242 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=789983943 appData=00000022 cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,242 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #34 should become standby
2015-10-27 07:27:24,242 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #34 to standby state
2015-10-27 07:27:24,243 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=789983943 appData=00000022 cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,244 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=789983943 appData=00000022 cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,291 WARN  ha.HealthMonitor (HealthMonitor.java:doHealthChecks(205)) - Service health check failed for DummyHAService #34: not healthy
2015-10-27 07:27:24,291 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_UNHEALTHY
2015-10-27 07:27:24,291 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #34 entered state: SERVICE_UNHEALTHY
2015-10-27 07:27:24,291 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(766)) - Quitting master election for DummyHAService #34 and marking that fencing is necessary
2015-10-27 07:27:24,292 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,292 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=789983943 appData=00000022 cb=Elector callbacks for DummyHAService #34
2015-10-27 07:27:24,292 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d79ed0002
2015-10-27 07:27:24,293 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d79ed0002 closed
2015-10-27 07:27:24,293 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,294 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54550 which had sessionid 0x150a90d79ed0002
2015-10-27 07:27:24,329 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54551
2015-10-27 07:27:24,329 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54549
2015-10-27 07:27:24,336 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,336 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,336 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54551
2015-10-27 07:27:24,336 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,337 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,337 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54549
2015-10-27 07:27:24,337 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1548490201 appData=00000021 cb=Elector callbacks for DummyHAService #33
2015-10-27 07:27:24,338 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,338 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d79ed0001
2015-10-27 07:27:24,339 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d79ed0001 closed
2015-10-27 07:27:24,339 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,340 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d79ed0001
2015-10-27 07:27:24,340 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,340 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d79ed0001, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:27:24,340 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 20013
2015-10-27 07:27:24,340 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 21
2015-10-27 07:27:24,341 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testGracefulFailoverToUnhealthy
2015-10-27 07:27:24,340 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54548 which had sessionid 0x150a90d79ed0001
2015-10-27 07:27:24,341 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:24,342 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:24,342 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:24,342 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:24,343 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:24,343 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:24,343 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:24,343 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:24,343 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:24,344 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:24,344 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11237
2015-10-27 07:27:24,346 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testGracefulFailoverToUnhealthy
2015-10-27 07:27:24,346 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testGracefulFailoverToUnhealthy
2015-10-27 07:27:24,346 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11238
2015-10-27 07:27:24,347 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testAutoFailoverOnBadState
2015-10-27 07:27:24,348 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:24,348 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test718364737731710175.junit.dir/version-2 snapdir build/test718364737731710175.junit.dir/version-2
2015-10-27 07:27:24,348 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11238
2015-10-27 07:27:24,352 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11238
2015-10-27 07:27:24,352 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54553
2015-10-27 07:27:24,353 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54553
2015-10-27 07:27:24,353 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:24,354 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54553 (no session established for client)
2015-10-27 07:27:24,355 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:24,386 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testAutoFailoverOnBadState
2015-10-27 07:27:24,386 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11238 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@75304935
2015-10-27 07:27:24,388 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11238. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,388 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11238, initiating session
2015-10-27 07:27:24,389 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54554
2015-10-27 07:27:24,389 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54554
2015-10-27 07:27:24,390 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:24,391 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7abf0000 with negotiated timeout 6000 for client /127.0.0.1:54554
2015-10-27 07:27:24,391 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11238, sessionid = 0x150a90d7abf0000, negotiated timeout = 6000
2015-10-27 07:27:24,391 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=603847167 appData=null cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,392 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=603847167 appData=null cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,392 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,392 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54554
2015-10-27 07:27:24,392 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54554
2015-10-27 07:27:24,393 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:24,395 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:24,396 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:24,397 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=603847167 appData=null cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,397 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7abf0000
2015-10-27 07:27:24,398 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7abf0000 closed
2015-10-27 07:27:24,398 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54554 which had sessionid 0x150a90d7abf0000
2015-10-27 07:27:24,398 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,398 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:24,399 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11238 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@7520d2a
2015-10-27 07:27:24,400 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11238. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,400 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11238, initiating session
2015-10-27 07:27:24,400 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54555
2015-10-27 07:27:24,401 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54555
2015-10-27 07:27:24,402 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7abf0001 with negotiated timeout 6000 for client /127.0.0.1:54555
2015-10-27 07:27:24,402 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11238, sessionid = 0x150a90d7abf0001, negotiated timeout = 6000
2015-10-27 07:27:24,403 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=225035234 appData=null cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,403 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54555
2015-10-27 07:27:24,403 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54555
2015-10-27 07:27:24,404 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=225035234 appData=null cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,404 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,404 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:24,405 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54556
2015-10-27 07:27:24,409 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:24,410 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54556: starting
2015-10-27 07:27:24,410 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,411 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #35 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,411 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=225035234 appData=00000023 cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,413 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=225035234 appData=00000023 cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,413 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,414 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:24,414 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,416 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=225035234 appData=00000023 cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,416 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #35 active...
2015-10-27 07:27:24,417 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #35 to active state
2015-10-27 07:27:24,417 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=225035234 appData=00000023 cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,418 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=225035234 appData=00000023 cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,449 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:24,450 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11238 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@1154d30d
2015-10-27 07:27:24,451 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11238. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,451 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11238, initiating session
2015-10-27 07:27:24,451 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54557
2015-10-27 07:27:24,452 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54557
2015-10-27 07:27:24,453 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7abf0002 with negotiated timeout 6000 for client /127.0.0.1:54557
2015-10-27 07:27:24,453 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11238, sessionid = 0x150a90d7abf0002, negotiated timeout = 6000
2015-10-27 07:27:24,453 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1643764942 appData=null cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,454 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1643764942 appData=null cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,454 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,454 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54557
2015-10-27 07:27:24,454 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54557
2015-10-27 07:27:24,455 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:24,456 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54558
2015-10-27 07:27:24,459 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:24,459 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54558: starting
2015-10-27 07:27:24,461 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,461 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #36 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,461 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,462 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d7abf0002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:24,463 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,463 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,463 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #36 should become standby
2015-10-27 07:27:24,464 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #36 to standby state
2015-10-27 07:27:24,464 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,465 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,500 INFO  ha.ClientBaseWithFixes (TestZKFailoverController.java:testAutoFailoverOnBadState(243)) - Faking svc0 to change the state, should failover to svc1
2015-10-27 07:27:24,565 ERROR ha.ZKFailoverController (ZKFailoverController.java:verifyChangedServiceState(826)) - Local service DummyHAService #35 has changed the serviceState to standby. Expected was active. Quitting election marking fencing necessary.
2015-10-27 07:27:24,565 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,565 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=225035234 appData=00000023 cb=Elector callbacks for DummyHAService #35
2015-10-27 07:27:24,566 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7abf0001
2015-10-27 07:27:24,575 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,575 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7abf0001 closed
2015-10-27 07:27:24,575 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d7abf0001
2015-10-27 07:27:24,576 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,576 WARN  server.NIOServerCnxn (NIOServerCnxn.java:doIO(357)) - caught end of stream exception
EndOfStreamException: Unable to read additional data from client sessionid 0x150a90d7abf0001, likely client has closed socket
	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:208)
	at java.lang.Thread.run(Thread.java:745)
2015-10-27 07:27:24,576 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54555 which had sessionid 0x150a90d7abf0001
2015-10-27 07:27:24,577 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,577 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,578 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000023
2015-10-27 07:27:24,578 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #35
2015-10-27 07:27:24,579 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #35 to standby state without fencing
2015-10-27 07:27:24,579 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,581 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,581 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #36 active...
2015-10-27 07:27:24,581 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #36 to active state
2015-10-27 07:27:24,581 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,583 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,601 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54556
2015-10-27 07:27:24,601 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54558
2015-10-27 07:27:24,602 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54558
2015-10-27 07:27:24,605 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54556
2015-10-27 07:27:24,605 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,605 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,605 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,610 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,610 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,611 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 28022
2015-10-27 07:27:24,611 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1643764942 appData=00000024 cb=Elector callbacks for DummyHAService #36
2015-10-27 07:27:24,611 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 25
2015-10-27 07:27:24,611 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testAutoFailoverOnBadState
2015-10-27 07:27:24,612 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:24,612 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7abf0002
2015-10-27 07:27:24,612 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:24,613 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7abf0002 closed
2015-10-27 07:27:24,613 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,613 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d7abf0002
2015-10-27 07:27:24,614 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,614 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54557 which had sessionid 0x150a90d7abf0002
2015-10-27 07:27:24,615 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:24,615 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:24,615 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:24,615 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:24,615 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:24,615 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:24,616 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:24,616 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:24,617 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11238
2015-10-27 07:27:24,618 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testAutoFailoverOnBadState
2015-10-27 07:27:24,618 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testAutoFailoverOnBadState
2015-10-27 07:27:24,619 INFO  zookeeper.PortAssignment (PortAssignment.java:unique(32)) - assigning port 11239
2015-10-27 07:27:24,619 INFO  zookeeper.ZKTestCase (ZKTestCase.java:starting(50)) - STARTING testGracefulFailoverFailBecomingActive
2015-10-27 07:27:24,620 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:startServer(437)) - STARTING server
2015-10-27 07:27:24,620 INFO  server.ZooKeeperServer (ZooKeeperServer.java:<init>(162)) - Created server with tickTime 3000 minSessionTimeout 6000 maxSessionTimeout 60000 datadir build/test2667820232435678932.junit.dir/version-2 snapdir build/test2667820232435678932.junit.dir/version-2
2015-10-27 07:27:24,621 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:configure(94)) - binding to port 0.0.0.0/0.0.0.0:11239
2015-10-27 07:27:24,622 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11239
2015-10-27 07:27:24,623 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54560
2015-10-27 07:27:24,623 INFO  server.NIOServerCnxn (NIOServerCnxn.java:checkFourLetterWord(827)) - Processing stat command from /127.0.0.1:54560
2015-10-27 07:27:24,624 INFO  server.NIOServerCnxn (NIOServerCnxn.java:commandRun(663)) - Stat command output
2015-10-27 07:27:24,624 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54560 (no session established for client)
2015-10-27 07:27:24,625 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:setUp(404)) - Client test setup finished
2015-10-27 07:27:24,644 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(50)) - RUNNING TEST METHOD testGracefulFailoverFailBecomingActive
2015-10-27 07:27:24,645 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11239 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@5117c3e6
2015-10-27 07:27:24,646 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,646 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11239, initiating session
2015-10-27 07:27:24,646 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54561
2015-10-27 07:27:24,647 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54561
2015-10-27 07:27:24,647 INFO  persistence.FileTxnLog (FileTxnLog.java:append(199)) - Creating new log file: log.1
2015-10-27 07:27:24,648 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7bcd0000 with negotiated timeout 6000 for client /127.0.0.1:54561
2015-10-27 07:27:24,648 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11239, sessionid = 0x150a90d7bcd0000, negotiated timeout = 6000
2015-10-27 07:27:24,648 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=54691500 appData=null cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,649 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=54691500 appData=null cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,649 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,649 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54561
2015-10-27 07:27:24,649 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54561
2015-10-27 07:27:24,650 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha
2015-10-27 07:27:24,652 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(295)) - Ensuring existence of /hadoop-ha/dummy-cluster
2015-10-27 07:27:24,653 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:ensureParentZNode(308)) - Successfully created /hadoop-ha/dummy-cluster in ZK.
2015-10-27 07:27:24,653 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=54691500 appData=null cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,654 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7bcd0000
2015-10-27 07:27:24,655 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7bcd0000 closed
2015-10-27 07:27:24,655 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54561 which had sessionid 0x150a90d7bcd0000
2015-10-27 07:27:24,655 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(91)) - Waiting for svc0 to enter active state
2015-10-27 07:27:24,655 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,656 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11239 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@54d03269
2015-10-27 07:27:24,657 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,657 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11239, initiating session
2015-10-27 07:27:24,657 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54562
2015-10-27 07:27:24,657 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54562
2015-10-27 07:27:24,659 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7bcd0001 with negotiated timeout 6000 for client /127.0.0.1:54562
2015-10-27 07:27:24,659 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11239, sessionid = 0x150a90d7bcd0001, negotiated timeout = 6000
2015-10-27 07:27:24,659 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=265837094 appData=null cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,659 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=265837094 appData=null cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,659 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,659 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54562
2015-10-27 07:27:24,660 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54562
2015-10-27 07:27:24,661 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:24,662 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54563
2015-10-27 07:27:24,665 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:24,665 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54563: starting
2015-10-27 07:27:24,666 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,667 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #37 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,667 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,669 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,669 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,669 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:24,669 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,671 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,671 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #37 active...
2015-10-27 07:27:24,672 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #37 to active state
2015-10-27 07:27:24,672 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,673 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,706 INFO  ha.MiniZKFCCluster (MiniZKFCCluster.java:start(94)) - Adding svc1
2015-10-27 07:27:24,707 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11239 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@16d58d32
2015-10-27 07:27:24,708 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,708 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11239, initiating session
2015-10-27 07:27:24,708 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54564
2015-10-27 07:27:24,709 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54564
2015-10-27 07:27:24,710 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7bcd0002 with negotiated timeout 6000 for client /127.0.0.1:54564
2015-10-27 07:27:24,710 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11239, sessionid = 0x150a90d7bcd0002, negotiated timeout = 6000
2015-10-27 07:27:24,710 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=1393766480 appData=null cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,711 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=1393766480 appData=null cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,711 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,711 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54564
2015-10-27 07:27:24,711 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54564
2015-10-27 07:27:24,712 INFO  ipc.CallQueueManager (CallQueueManager.java:<init>(53)) - Using callQueue class java.util.concurrent.LinkedBlockingQueue
2015-10-27 07:27:24,713 INFO  ipc.Server (Server.java:run(605)) - Starting Socket Reader #1 for port 54565
2015-10-27 07:27:24,716 INFO  ipc.Server (Server.java:run(827)) - IPC Server Responder: starting
2015-10-27 07:27:24,716 INFO  ipc.Server (Server.java:run(674)) - IPC Server listener on 54565: starting
2015-10-27 07:27:24,717 INFO  ha.HealthMonitor (HealthMonitor.java:enterState(238)) - Entering state SERVICE_HEALTHY
2015-10-27 07:27:24,717 INFO  ha.ZKFailoverController (ZKFailoverController.java:setLastHealthState(850)) - Local service DummyHAService #38 entered state: SERVICE_HEALTHY
2015-10-27 07:27:24,717 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,718 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest(645)) - Got user-level KeeperException when processing sessionid:0x150a90d7bcd0002 type:create cxid:0x2 zxid:0x9 txntype:-1 reqpath:n/a Error Path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock Error:KeeperErrorCode = NodeExists for /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock
2015-10-27 07:27:24,719 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: -110 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,720 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeStandby(909)) - Becoming standby for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,720 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(482)) - ZK Election indicated that DummyHAService #38 should become standby
2015-10-27 07:27:24,721 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeStandby(487)) - Successfully transitioned DummyHAService #38 to standby state
2015-10-27 07:27:24,721 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,722 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,759 INFO  ha.ZKFailoverController (ZKFailoverController.java:doGracefulFailover(650)) - Asking DummyHAService #37 to cede its active state for 10000ms
2015-10-27 07:27:24,760 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(570)) - Requested by bikash (auth:SIMPLE) at null to cede active role.
2015-10-27 07:27:24,761 INFO  ha.ZKFailoverController (ZKFailoverController.java:doCedeActive(575)) - Successfully ensured local node is in standby mode
2015-10-27 07:27:24,761 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,761 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:tryDeleteOwnBreadCrumbNode(844)) - Deleting bread-crumb of active node...
2015-10-27 07:27:24,763 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,763 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7bcd0001
2015-10-27 07:27:24,765 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: NodeDeleted with state:SyncConnected for path:/hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,765 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7bcd0001 closed
2015-10-27 07:27:24,765 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54562 which had sessionid 0x150a90d7bcd0001
2015-10-27 07:27:24,765 INFO  ha.ZKFailoverController (ZKFailoverController.java:recheckElectability(741)) - Would have joined master election, but this node is prohibited from doing so for 9995 more ms
2015-10-27 07:27:24,766 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d7bcd0001
2015-10-27 07:27:24,767 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,767 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,767 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,768 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(887)) - No old node to fence
2015-10-27 07:27:24,768 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,769 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,770 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #38 active...
2015-10-27 07:27:24,770 FATAL ha.ZKFailoverController (ZKFailoverController.java:becomeActive(391)) - Couldn't make DummyHAService #38 active
org.apache.hadoop.ha.ServiceFailedException: injected failure
	at org.apache.hadoop.ha.DummyHAService$MockHAProtocolImpl.transitionToActive(DummyHAService.java:146)
	at org.apache.hadoop.ha.HAServiceProtocolHelper.transitionToActive(HAServiceProtocolHelper.java:48)
	at org.apache.hadoop.ha.ZKFailoverController.becomeActive(ZKFailoverController.java:380)
	at org.apache.hadoop.ha.ZKFailoverController.access$900(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$ElectorCallbacks.becomeActive(ZKFailoverController.java:871)
	at org.apache.hadoop.ha.ActiveStandbyElector.becomeActive(ActiveStandbyElector.java:805)
	at org.apache.hadoop.ha.ActiveStandbyElector.processResult(ActiveStandbyElector.java:416)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
2015-10-27 07:27:24,770 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(809)) - Exception handling the winning of election
org.apache.hadoop.ha.ServiceFailedException: injected failure
	at org.apache.hadoop.ha.DummyHAService$MockHAProtocolImpl.transitionToActive(DummyHAService.java:146)
	at org.apache.hadoop.ha.HAServiceProtocolHelper.transitionToActive(HAServiceProtocolHelper.java:48)
	at org.apache.hadoop.ha.ZKFailoverController.becomeActive(ZKFailoverController.java:380)
	at org.apache.hadoop.ha.ZKFailoverController.access$900(ZKFailoverController.java:61)
	at org.apache.hadoop.ha.ZKFailoverController$ElectorCallbacks.becomeActive(ZKFailoverController.java:871)
	at org.apache.hadoop.ha.ActiveStandbyElector.becomeActive(ActiveStandbyElector.java:805)
	at org.apache.hadoop.ha.ActiveStandbyElector.processResult(ActiveStandbyElector.java:416)
	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:599)
	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
2015-10-27 07:27:24,771 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:reJoinElection(670)) - Trying to re-establish ZK session
2015-10-27 07:27:24,771 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=1393766480 appData=00000026 cb=Elector callbacks for DummyHAService #38
2015-10-27 07:27:24,771 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:joinElection(259)) - Attempting active election for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,771 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:reEstablishSession(740)) - Establishing zookeeper connection for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,771 INFO  zookeeper.ZooKeeper (ZooKeeper.java:<init>(438)) - Initiating client connection, connectString=127.0.0.1:11239 sessionTimeout=5000 watcher=org.apache.hadoop.ha.ActiveStandbyElector$WatcherWithClientRef@3d03d2c8
2015-10-27 07:27:24,771 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7bcd0002
2015-10-27 07:27:24,772 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7bcd0002 closed
2015-10-27 07:27:24,772 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54564 which had sessionid 0x150a90d7bcd0002
2015-10-27 07:27:24,773 INFO  zookeeper.ClientCnxn (ClientCnxn.java:logStartConnect(975)) - Opening socket connection to server 127.0.0.1/127.0.0.1:11239. Will not attempt to authenticate using SASL (unknown error)
2015-10-27 07:27:24,773 INFO  zookeeper.ClientCnxn (ClientCnxn.java:primeConnection(852)) - Socket connection established to 127.0.0.1/127.0.0.1:11239, initiating session
2015-10-27 07:27:24,773 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(197)) - Accepted socket connection from /127.0.0.1:54566
2015-10-27 07:27:24,773 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processConnectRequest(868)) - Client attempting to establish new session at /127.0.0.1:54566
2015-10-27 07:27:24,774 INFO  server.ZooKeeperServer (ZooKeeperServer.java:finishSessionInit(617)) - Established session 0x150a90d7bcd0003 with negotiated timeout 6000 for client /127.0.0.1:54566
2015-10-27 07:27:24,775 INFO  zookeeper.ClientCnxn (ClientCnxn.java:onConnected(1235)) - Session establishment complete on server 127.0.0.1/127.0.0.1:11239, sessionid = 0x150a90d7bcd0003, negotiated timeout = 6000
2015-10-27 07:27:24,775 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:createConnection(768)) - Created new connection for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,775 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(892)) - got auth packet /127.0.0.1:54566
2015-10-27 07:27:24,782 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(538)) - Watcher event type: None with state:SyncConnected for path:null connectionState: TERMINATED for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,783 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:processWatchEvent(547)) - Session connected.
2015-10-27 07:27:24,782 INFO  server.ZooKeeperServer (ZooKeeperServer.java:processPacket(926)) - auth success /127.0.0.1:54566
2015-10-27 07:27:24,784 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(409)) - CreateNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED  for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,784 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(877)) - Checking for any old active which needs to be fenced...
2015-10-27 07:27:24,785 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:fenceOldActive(898)) - Old node exists: 00000026
2015-10-27 07:27:24,786 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(511)) - Should fence: DummyHAService #38
2015-10-27 07:27:24,787 INFO  ha.ZKFailoverController (ZKFailoverController.java:doFence(517)) - Successfully transitioned DummyHAService #38 to standby state without fencing
2015-10-27 07:27:24,787 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:writeBreadCrumbNode(824)) - Writing znode /hadoop-ha/dummy-cluster/ActiveBreadCrumb to indicate that the local node is the most recent active...
2015-10-27 07:27:24,788 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:becomeActive(804)) - Becoming active for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,788 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(378)) - Trying to make DummyHAService #37 active...
2015-10-27 07:27:24,789 INFO  ha.ZKFailoverController (ZKFailoverController.java:becomeActive(385)) - Successfully transitioned DummyHAService #37 to active state
2015-10-27 07:27:24,789 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:monitorActiveStatus(649)) - Monitoring active leader for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,790 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:processResult(471)) - StatNode result: 0 for path: /hadoop-ha/dummy-cluster/ActiveStandbyElectorLock connectionState: CONNECTED for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,834 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54563
2015-10-27 07:27:24,835 INFO  ipc.Server (Server.java:stop(2437)) - Stopping server on 54565
2015-10-27 07:27:24,836 INFO  ha.ActiveStandbyElector (ActiveStandbyElector.java:quitElection(354)) - Yielding from election
2015-10-27 07:27:24,836 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,836 DEBUG ha.ActiveStandbyElector (ActiveStandbyElector.java:terminateConnection(776)) - Terminating ZK connection for elector id=265837094 appData=00000025 cb=Elector callbacks for DummyHAService #37
2015-10-27 07:27:24,836 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54563
2015-10-27 07:27:24,837 INFO  ipc.Server (Server.java:run(706)) - Stopping IPC Server listener on 54565
2015-10-27 07:27:24,837 INFO  ipc.Server (Server.java:run(832)) - Stopping IPC Server Responder
2015-10-27 07:27:24,837 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:pRequest2Txn(494)) - Processed session termination for sessionid: 0x150a90d7bcd0003
2015-10-27 07:27:24,838 INFO  zookeeper.ZooKeeper (ZooKeeper.java:close(684)) - Session: 0x150a90d7bcd0003 closed
2015-10-27 07:27:24,838 INFO  ha.HealthMonitor (HealthMonitor.java:shutdown(150)) - Stopping HealthMonitor thread
2015-10-27 07:27:24,838 WARN  ha.ActiveStandbyElector (ActiveStandbyElector.java:isStaleClient(1006)) - Ignoring stale result from old client with sessionId 0x150a90d7bcd0003
2015-10-27 07:27:24,839 INFO  zookeeper.ClientCnxn (ClientCnxn.java:run(512)) - EventThread shut down
2015-10-27 07:27:24,838 INFO  server.NIOServerCnxn (NIOServerCnxn.java:closeSock(1007)) - Closed socket connection for client /127.0.0.1:54566 which had sessionid 0x150a90d7bcd0003
2015-10-27 07:27:24,839 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(55)) - Memory used 5926
2015-10-27 07:27:24,840 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(60)) - Number of threads 28
2015-10-27 07:27:24,840 INFO  zookeeper.JUnit4ZKTestRunner (JUnit4ZKTestRunner.java:evaluate(65)) - FINISHED TEST METHOD testGracefulFailoverFailBecomingActive
2015-10-27 07:27:24,840 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:tearDown(470)) - tearDown starting
2015-10-27 07:27:24,840 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:stopServer(442)) - STOPPING server
2015-10-27 07:27:24,841 INFO  server.NIOServerCnxnFactory (NIOServerCnxnFactory.java:run(224)) - NIOServerCnxn factory exited run method
2015-10-27 07:27:24,842 INFO  server.ZooKeeperServer (ZooKeeperServer.java:shutdown(441)) - shutting down
2015-10-27 07:27:24,842 INFO  server.SessionTrackerImpl (SessionTrackerImpl.java:shutdown(225)) - Shutting down
2015-10-27 07:27:24,842 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:shutdown(761)) - Shutting down
2015-10-27 07:27:24,842 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:shutdown(209)) - Shutting down
2015-10-27 07:27:24,843 INFO  server.PrepRequestProcessor (PrepRequestProcessor.java:run(143)) - PrepRequestProcessor exited loop!
2015-10-27 07:27:24,843 INFO  server.SyncRequestProcessor (SyncRequestProcessor.java:run(187)) - SyncRequestProcessor exited!
2015-10-27 07:27:24,850 INFO  server.FinalRequestProcessor (FinalRequestProcessor.java:shutdown(415)) - shutdown of request processor complete
2015-10-27 07:27:24,851 INFO  ha.ClientBaseWithFixes (ClientBaseWithFixes.java:send4LetterWord(234)) - connecting to 127.0.0.1 11239
2015-10-27 07:27:24,852 INFO  zookeeper.ZKTestCase (ZKTestCase.java:succeeded(60)) - SUCCEEDED testGracefulFailoverFailBecomingActive
2015-10-27 07:27:24,852 INFO  zookeeper.ZKTestCase (ZKTestCase.java:finished(55)) - FINISHED testGracefulFailoverFailBecomingActive
